<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en">
   <head profile="http://dublincore.org/documents/2008/08/04/dc-html/">
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>HPACK - Header Compression for HTTP/2</title><script>
var buttonsAdded = false;

function init() {
  var fb = document.createElement("div");
  fb.className = "feedback noprint";
  fb.setAttribute("onclick", "feedback();");
  fb.appendChild(document.createTextNode("feedback"));

  var bodyl = document.getElementsByTagName("body");
  bodyl.item(0).appendChild(fb);
}

function feedback() {
  toggleButtonsToElementsByName("h1");
  toggleButtonsToElementsByName("h2");
  toggleButtonsToElementsByName("h3");
  toggleButtonsToElementsByName("h4");

  buttonsAdded = !buttonsAdded;
}

function toggleButtonsToElementsByName(name) {
  var list = document.getElementsByTagName(name);
  for (var i = 0; i < list.length; i++) {
    toggleButton(list.item(i));
  }
}

function toggleButton(node) {
  if (! buttonsAdded) {

    // docname
    var template = "mailto:ietf-http-wg@w3.org?subject={docname},%20%22{section}%22&body=<{ref}>:";

    var id = node.getAttribute("id");
    // better id available?
    var titlelinks = node.getElementsByTagName("a");
    for (var i = 0; i < titlelinks.length; i++) {
      var tl = titlelinks.item(i);
      if (tl.getAttribute("id")) {
        id = tl.getAttribute("id");
      }
    }

    // ref
    var ref = window.location.toString();
    var hash = ref.indexOf("#");
    if (hash != -1) {
      ref = ref.substring(0, hash);
    }
    if (id != "") {
      ref += "#" + id;
    }

    // docname
    var docname = "draft-ietf-httpbis-header-compression-latest";

    // section
    var section = node.textContent;
    section = section.replace("\u00a0", " ");

    // build URI from template
    var uri = template.replace("{docname}", encodeURIComponent(docname));
    uri = uri.replace("{section}", encodeURIComponent(section));
    uri = uri.replace("{ref}", encodeURIComponent(ref));

    var button = document.createElement("a");
    button.className = "fbbutton noprint";
    button.setAttribute("href", uri);
    button.appendChild(document.createTextNode("send feedback"));
    node.appendChild(button);
  }
  else {
    var buttons = node.getElementsByTagName("a");
    for (var i = 0; i < buttons.length; i++) {
      var b = buttons.item(i);
      if (b.className == "fbbutton noprint") {
        node.removeChild(b);
      }
    }
  }
}</script><style type="text/css" title="Xml2Rfc (sans serif)">
a {
  text-decoration: none;
}
a.smpl {
  color: black;
}
a:hover {
  text-decoration: underline;
}
a:active {
  text-decoration: underline;
}
address {
  margin-top: 1em;
  margin-left: 2em;
  font-style: normal;
}
body {
  color: black;
  font-family: cambria, helvetica, arial, sans-serif;
  font-size: 11pt;
  margin-right: 2em;
}
cite {
  font-style: normal;
}
dl {
  margin-left: 2em;
}
ul.empty {
  list-style-type: none;
}
ul.empty li {
  margin-top: .5em;
}
dl p {
  margin-left: 0em;
}
dt {
  margin-top: .5em;
}
h1 {
  font-size: 130%;
  line-height: 21pt;
  page-break-after: avoid;
}
h1.np {
  page-break-before: always;
}
h2 {
  font-size: 120%;
  line-height: 15pt;
  page-break-after: avoid;
}
h3 {
  font-size: 110%;
  page-break-after: avoid;
}
h4, h5, h6 {
  page-break-after: avoid;
}
h1 a, h2 a, h3 a, h4 a, h5 a, h6 a {
  color: black;
}
img {
  margin-left: 3em;
}
li {
  margin-left: 2em;
}
ol {
  margin-left: 2em;
}
ol.la {
  list-style-type: lower-alpha;
}
ol.ua {
  list-style-type: upper-alpha;
}
ol p {
  margin-left: 0em;
}
p {
  margin-left: 2em;
}
pre {
  margin-left: 3em;
  background-color: lightyellow;
  padding: .25em;
  page-break-inside: avoid;
}
pre.text2 {
  border-style: dotted;
  border-width: 1px;
  background-color: #f0f0f0;
  width: 69em;
}
pre.inline {
  background-color: white;
  padding: 0em;
}
pre.text {
  border-style: dotted;
  border-width: 1px;
  background-color: #f8f8f8;
  width: 69em;
}
pre.drawing {
  border-style: solid;
  border-width: 1px;
  background-color: #f8f8f8;
  padding: 2em;
}
sup {
  font-size: 60%;
}
table {
  margin-left: 2em;
}
table.tt {
  vertical-align: top;
  border-color: gray;
}
table.tt th {
  border-color: gray;
}
table.tt td {
  border-color: gray;
}
table.all {
  border-style: solid;
  border-width: 2px;
}
table.full {
  border-style: solid;
  border-width: 2px;
}
table.tt td {
  vertical-align: top;
}
table.all td {
  border-style: solid;
  border-width: 1px;
}
table.full td {
  border-style: none solid;
  border-width: 1px;
}
table.tt th {
  vertical-align: top;
}
table.all th {
  border-style: solid;
  border-width: 1px;
}
table.full th {
  border-style: solid;
  border-width: 1px 1px 2px 1px;
}
table.headers th {
  border-style: none none solid none;
  border-width: 2px;
}
table.left {
  margin-right: auto;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
caption {
  caption-side: bottom;
  font-weight: bold;
  font-size: 10pt;
  margin-top: .5em;
}

table.header {
  border-spacing: 1px;
  width: 95%;
  font-size: 11pt;
  color: white;
}
td.top {
  vertical-align: top;
}
td.topnowrap {
  vertical-align: top;
  white-space: nowrap;
}
table.header td {
  background-color: gray;
  width: 50%;
}
td.reference {
  vertical-align: top;
  white-space: nowrap;
  padding-right: 1em;
}
thead {
  display:table-header-group;
}
ul.toc, ul.toc ul {
  list-style: none;
  margin-left: 1.5em;
  padding-left: 0em;
}
ul.toc li {
  line-height: 150%;
  font-weight: bold;
  margin-left: 0em;
}
ul.toc li li {
  line-height: normal;
  font-weight: normal;
  font-size: 10pt;
  margin-left: 0em;
}
li.excluded {
  font-size: 0pt;
}
ul p {
  margin-left: 0em;
}
.title, .filename, h1, h2, h3, h4 {
  font-family: candara, helvetica, arial, sans-serif;
}
samp, tt, code, pre {
  font: consolas, monospace;
}

.comment {
  background-color: yellow;
}
.center {
  text-align: center;
}
.error {
  color: red;
  font-style: italic;
  font-weight: bold;
}
.figure {
  font-weight: bold;
  text-align: center;
  font-size: 10pt;
}
.filename {
  color: #333333;
  font-size: 75%;
  font-weight: bold;
  line-height: 21pt;
  text-align: center;
}
.fn {
  font-weight: bold;
}
.left {
  text-align: left;
}
.right {
  text-align: right;
}
.title {
  color: green;
  font-size: 150%;
  line-height: 18pt;
  font-weight: bold;
  text-align: center;
  margin-top: 36pt;
}
.warning {
  font-size: 130%;
  background-color: yellow;
}
.feedback {
  position: fixed;
  bottom: 1%;
  right: 1%;
  padding: 3px 5px;
  color: white;
  border-radius: 5px;
  background: #a00000;
  border: 1px solid silver;
}
.fbbutton {
  margin-left: 1em;
  color: #303030;
  font-size: small;
  font-weight: normal;
  background: #d0d000;
  padding: 1px 4px;
  border: 1px solid silver;
  border-radius: 5px;
}

@media print {
  .noprint {
    display: none;
  }

  a {
    color: black;
    text-decoration: none;
  }

  table.header {
    width: 90%;
  }

  td.header {
    width: 50%;
    color: black;
    background-color: white;
    vertical-align: top;
    font-size: 110%;
  }

  ul.toc a:nth-child(2)::after {
    content: leader('.') target-counter(attr(href), page);
  }

  ul.ind li li a {
    content: target-counter(attr(href), page);
  }

  .print2col {
    column-count: 2;
    -moz-column-count: 2;
    column-fill: auto;
  }
}

@page {
  @top-left {
       content: "Internet-Draft";
  }
  @top-right {
       content: "March 2014";
  }
  @top-center {
       content: "HPACK";
  }
  @bottom-left {
       content: "Peon & Ruellan";
  }
  @bottom-center {
       content: "Expires October 2, 2014";
  }
  @bottom-right {
       content: "[Page " counter(page) "]";
  }
}

@page:first {
    @top-left {
      content: normal;
    }
    @top-right {
      content: normal;
    }
    @top-center {
      content: normal;
    }
}
</style><style tyle="text/css">@viewport {   zoom: 1.0;   width: extend-to-zoom; }  @-ms-viewport {   width: extend-to-zoom;   zoom: 1.0; }  body {   font: 11pt cambria, helvetica, arial, sans-serif;   font-size-adjust: 0.5;   line-height: 130%;   margin: 1em auto;   max-width: 700px; }  .title, .filename, h1, h2, h3, h4 {   font-family: candara, helvetica, arial, sans-serif;   font-size-adjust: 0.5; } .title { font-size: 150%; } h1 { font-size: 130%; } h2 { font-size: 120%; } h3, h4 { font-size: 110%; } ul.toc >li { font-size: 95%; } ul.toc >li >ul, .figure, caption { font-size: 90%; }  table {   margin-left: 0em; } table.header {   width: 100%; }  table.header td {   background-color: inherit;   color: black; }  samp, tt, code, pre {   font: 11pt consolas, monospace;   font-size-adjust: none; }  pre.text, pre.text2 {   width: 90%; }  dt {   float: left; clear: left;   margin: 0.5em 0.5em 0 0; } dt:first-child {   margin-top: 0; } dd {   margin: 0.5em 0 0 2em; } dd p, dd ul {   margin-top: 0; margin-bottom: 0; } dd *+p {   margin-top: 0.5em; }  ol, ul {   padding: 0;   margin: 0.5em 0 0.5em 2em; } ul.toc, ul.toc ul {    margin: 0 0 0 1.5em; } ul.toc a:first-child {    display: inline-block;    min-width: 1.2em; }</style><link rel="Contents" href="#rfc.toc">
      <link rel="Author" href="#rfc.authors">
      <link rel="Copyright" href="#rfc.copyrightnotice">
      <link rel="Chapter" title="1 Introduction" href="#rfc.section.1">
      <link rel="Chapter" title="2 Overview" href="#rfc.section.2">
      <link rel="Chapter" title="3 Header Field Encoding" href="#rfc.section.3">
      <link rel="Chapter" title="4 Detailed Format" href="#rfc.section.4">
      <link rel="Chapter" title="5 Security Considerations" href="#rfc.section.5">
      <link rel="Chapter" title="6 Acknowledgements" href="#rfc.section.6">
      <link rel="Chapter" href="#rfc.section.7" title="7 References">
      <link rel="Appendix" title="A Change Log (to be removed by RFC Editor before publication" href="#rfc.section.A">
      <link rel="Appendix" title="B Static Table" href="#rfc.section.B">
      <link rel="Appendix" title="C Huffman Codes" href="#rfc.section.C">
      <link rel="Appendix" title="D Examples" href="#rfc.section.D">
      <meta name="generator" content="http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.620, 2014/02/15 10:52:53, XSLT vendor: SAXON 9.1.0.8 from Saxonica http://www.saxonica.com/">
      <meta name="keywords" content="HTTP, Header">
      <link rel="schema.dct" href="http://purl.org/dc/terms/">
      <meta name="dct.creator" content="Peon, R.">
      <meta name="dct.creator" content="Ruellan, H.">
      <meta name="dct.identifier" content="urn:ietf:id:draft-ietf-httpbis-header-compression-latest">
      <meta name="dct.issued" scheme="ISO8601" content="2014-03-31">
      <meta name="dct.abstract" content="This specification defines HPACK, a compression format for efficiently representing HTTP header fields in the context of HTTP/2.">
      <meta name="description" content="This specification defines HPACK, a compression format for efficiently representing HTTP header fields in the context of HTTP/2.">
   </head>
   <body onload="init();">
      <table class="header">
         <tbody>
            <tr>
               <td class="left">HTTPbis Working Group</td>
               <td class="right">R. Peon</td>
            </tr>
            <tr>
               <td class="left">Internet-Draft</td>
               <td class="right">Google, Inc</td>
            </tr>
            <tr>
               <td class="left">Intended status: Standards Track</td>
               <td class="right">H. Ruellan</td>
            </tr>
            <tr>
               <td class="left">Expires: October 2, 2014</td>
               <td class="right">Canon CRF</td>
            </tr>
            <tr>
               <td class="left"></td>
               <td class="right">March 31, 2014</td>
            </tr>
         </tbody>
      </table>
      <p class="title">HPACK - Header Compression for HTTP/2<br><span class="filename">draft-ietf-httpbis-header-compression-latest</span></p>
      <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
      <p>This specification defines HPACK, a compression format for efficiently representing HTTP header fields in the context of HTTP/2.</p>
      <h1 id="rfc.note.1"><a href="#rfc.note.1">Editorial Note (To be removed by RFC Editor)</a></h1>
      <p>Discussion of this draft takes place on the HTTPBIS working group mailing list (ietf-http-wg@w3.org), which is archived at &lt;<a href="http://lists.w3.org/Archives/Public/ietf-http-wg/">http://lists.w3.org/Archives/Public/ietf-http-wg/</a>&gt;.
      </p>
      <p>Working Group information can be found at &lt;<a href="http://tools.ietf.org/wg/httpbis/">http://tools.ietf.org/wg/httpbis/</a>&gt;; that specific to HTTP/2 are at &lt;<a href="http://http2.github.io/">http://http2.github.io/</a>&gt;.
      </p>
      <p>The changes in this draft are summarized in <a href="#changes.since.draft-ietf-httpbis-header-compression-06" title="Since draft-ietf-httpbis-header-compression-06">Appendix&nbsp;A.1</a>.
      </p>
      <div id="rfc.status">
         <h1><a href="#rfc.status">Status of This Memo</a></h1>
         <p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
         <p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF). Note that other groups may also distribute
            working documents as Internet-Drafts. The list of current Internet-Drafts is at <a href="http://datatracker.ietf.org/drafts/current/">http://datatracker.ietf.org/drafts/current/</a>.
         </p>
         <p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other
            documents at any time. It is inappropriate to use Internet-Drafts as reference material or to cite them other than as “work
            in progress”.
         </p>
         <p>This Internet-Draft will expire on October 2, 2014.</p>
      </div>
      <div id="rfc.copyrightnotice">
         <h1><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
         <p>Copyright © 2014 IETF Trust and the persons identified as the document authors. All rights reserved.</p>
         <p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of publication of this document. Please review these documents carefully, as they describe your rights
            and restrictions with respect to this document. Code Components extracted from this document must include Simplified BSD License
            text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified
            BSD License.
         </p>
      </div>
      <hr class="noprint">
      <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
      <ul class="toc">
         <li><a href="#rfc.section.1">1.</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.1">Introduction</a></li>
         <li><a href="#rfc.section.2">2.</a>&nbsp;&nbsp;&nbsp;<a href="#overview">Overview</a><ul>
               <li><a href="#rfc.section.2.1">2.1</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.2.1">Outline</a></li>
            </ul>
         </li>
         <li><a href="#rfc.section.3">3.</a>&nbsp;&nbsp;&nbsp;<a href="#header.encoding">Header Field Encoding</a><ul>
               <li><a href="#rfc.section.3.1">3.1</a>&nbsp;&nbsp;&nbsp;<a href="#encoding.concepts">Encoding Concepts</a><ul>
                     <li><a href="#rfc.section.3.1.1">3.1.1</a>&nbsp;&nbsp;&nbsp;<a href="#encoding.context">Encoding Context</a></li>
                     <li><a href="#rfc.section.3.1.2">3.1.2</a>&nbsp;&nbsp;&nbsp;<a href="#header.table">Header Table</a></li>
                     <li><a href="#rfc.section.3.1.3">3.1.3</a>&nbsp;&nbsp;&nbsp;<a href="#reference.set">Reference Set</a></li>
                     <li><a href="#rfc.section.3.1.4">3.1.4</a>&nbsp;&nbsp;&nbsp;<a href="#header.representation">Header Field Representation</a></li>
                     <li><a href="#rfc.section.3.1.5">3.1.5</a>&nbsp;&nbsp;&nbsp;<a href="#header.emission">Header Field Emission</a></li>
                  </ul>
               </li>
               <li><a href="#rfc.section.3.2">3.2</a>&nbsp;&nbsp;&nbsp;<a href="#header.block.decoding">Header Block Decoding</a><ul>
                     <li><a href="#rfc.section.3.2.1">3.2.1</a>&nbsp;&nbsp;&nbsp;<a href="#header.representation.processing">Header Field Representation Processing</a></li>
                     <li><a href="#rfc.section.3.2.2">3.2.2</a>&nbsp;&nbsp;&nbsp;<a href="#reference.set.emission">Reference Set Emission</a></li>
                     <li><a href="#rfc.section.3.2.3">3.2.3</a>&nbsp;&nbsp;&nbsp;<a href="#header.set.completion">Header Set Completion</a></li>
                  </ul>
               </li>
               <li><a href="#rfc.section.3.3">3.3</a>&nbsp;&nbsp;&nbsp;<a href="#header.table.management">Header Table Management</a><ul>
                     <li><a href="#rfc.section.3.3.1">3.3.1</a>&nbsp;&nbsp;&nbsp;<a href="#maximum.table.size">Maximum Table Size</a></li>
                     <li><a href="#rfc.section.3.3.2">3.3.2</a>&nbsp;&nbsp;&nbsp;<a href="#entry.eviction">Entry Eviction When Header Table Size Changes</a></li>
                     <li><a href="#rfc.section.3.3.3">3.3.3</a>&nbsp;&nbsp;&nbsp;<a href="#entry.addition">Entry Eviction when Adding New Entries</a></li>
                  </ul>
               </li>
            </ul>
         </li>
         <li><a href="#rfc.section.4">4.</a>&nbsp;&nbsp;&nbsp;<a href="#detailed.format">Detailed Format</a><ul>
               <li><a href="#rfc.section.4.1">4.1</a>&nbsp;&nbsp;&nbsp;<a href="#low-level.representation">Low-level representations</a><ul>
                     <li><a href="#rfc.section.4.1.1">4.1.1</a>&nbsp;&nbsp;&nbsp;<a href="#integer.representation">Integer representation</a><ul>
                           <li><a href="#rfc.section.4.1.1.1">4.1.1.1</a>&nbsp;&nbsp;&nbsp;<a href="#integer.representation.example1">Example 1: Encoding 10 using a 5-bit prefix</a></li>
                           <li><a href="#rfc.section.4.1.1.2">4.1.1.2</a>&nbsp;&nbsp;&nbsp;<a href="#integer.representation.example2">Example 2: Encoding 1337 using a 5-bit prefix</a></li>
                           <li><a href="#rfc.section.4.1.1.3">4.1.1.3</a>&nbsp;&nbsp;&nbsp;<a href="#integer.representation.example3">Example 3: Encoding 42 starting at an                         octet-boundary</a></li>
                        </ul>
                     </li>
                     <li><a href="#rfc.section.4.1.2">4.1.2</a>&nbsp;&nbsp;&nbsp;<a href="#string.literal.representation">String Literal Representation</a></li>
                  </ul>
               </li>
               <li><a href="#rfc.section.4.2">4.2</a>&nbsp;&nbsp;&nbsp;<a href="#indexed.header.representation">Indexed Header Field Representation</a></li>
               <li><a href="#rfc.section.4.3">4.3</a>&nbsp;&nbsp;&nbsp;<a href="#literal.header.representation">Literal Header Field Representation</a><ul>
                     <li><a href="#rfc.section.4.3.1">4.3.1</a>&nbsp;&nbsp;&nbsp;<a href="#literal.header.with.incremental.indexing">Literal Header Field with Incremental Indexing</a></li>
                     <li><a href="#rfc.section.4.3.2">4.3.2</a>&nbsp;&nbsp;&nbsp;<a href="#literal.header.without.indexing">Literal Header Field without Indexing</a></li>
                     <li><a href="#rfc.section.4.3.3">4.3.3</a>&nbsp;&nbsp;&nbsp;<a href="#literal.header.never.indexed">Literal Header Field never Indexed</a></li>
                  </ul>
               </li>
               <li><a href="#rfc.section.4.4">4.4</a>&nbsp;&nbsp;&nbsp;<a href="#encoding.context.update">Encoding Context Update</a></li>
            </ul>
         </li>
         <li><a href="#rfc.section.5">5.</a>&nbsp;&nbsp;&nbsp;<a href="#Security">Security Considerations</a><ul>
               <li><a href="#rfc.section.5.1">5.1</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.5.1">Compression-based Attacks</a></li>
               <li><a href="#rfc.section.5.2">5.2</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.5.2">Memory Consumption</a></li>
               <li><a href="#rfc.section.5.3">5.3</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.5.3">Implementation Limits</a></li>
            </ul>
         </li>
         <li><a href="#rfc.section.6">6.</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.6">Acknowledgements</a></li>
         <li><a href="#rfc.section.7">7.</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.references">References</a><ul>
               <li><a href="#rfc.section.7.1">7.1</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.references.1">Normative References</a></li>
               <li><a href="#rfc.section.7.2">7.2</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.references.2">Informative References</a></li>
            </ul>
         </li>
         <li><a href="#rfc.authors">Authors' Addresses</a></li>
         <li><a href="#rfc.section.A">A.</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.A">Change Log (to be removed by RFC Editor before publication</a><ul>
               <li><a href="#rfc.section.A.1">A.1</a>&nbsp;&nbsp;&nbsp;<a href="#changes.since.draft-ietf-httpbis-header-compression-06">Since draft-ietf-httpbis-header-compression-06</a></li>
               <li><a href="#rfc.section.A.2">A.2</a>&nbsp;&nbsp;&nbsp;<a href="#changes.since.draft-ietf-httpbis-header-compression-05">Since draft-ietf-httpbis-header-compression-05</a></li>
               <li><a href="#rfc.section.A.3">A.3</a>&nbsp;&nbsp;&nbsp;<a href="#changes.since.draft-ietf-httpbis-header-compression-04">Since draft-ietf-httpbis-header-compression-04</a></li>
               <li><a href="#rfc.section.A.4">A.4</a>&nbsp;&nbsp;&nbsp;<a href="#changes.since.draft-ietf-httpbis-header-compression-03">Since draft-ietf-httpbis-header-compression-03</a></li>
               <li><a href="#rfc.section.A.5">A.5</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.A.5">Since draft-ietf-httpbis-header-compression-02</a></li>
               <li><a href="#rfc.section.A.6">A.6</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.A.6">Since draft-ietf-httpbis-header-compression-01</a></li>
               <li><a href="#rfc.section.A.7">A.7</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.A.7">Since draft-ietf-httpbis-header-compression-00</a></li>
            </ul>
         </li>
         <li><a href="#rfc.section.B">B.</a>&nbsp;&nbsp;&nbsp;<a href="#static.table">Static Table</a></li>
         <li><a href="#rfc.section.C">C.</a>&nbsp;&nbsp;&nbsp;<a href="#huffman.codes">Huffman Codes</a></li>
         <li><a href="#rfc.section.D">D.</a>&nbsp;&nbsp;&nbsp;<a href="#examples">Examples</a><ul>
               <li><a href="#rfc.section.D.1">D.1</a>&nbsp;&nbsp;&nbsp;<a href="#header.field.representation.examples">Header Field Representation Examples</a><ul>
                     <li><a href="#rfc.section.D.1.1">D.1.1</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.1.1">Literal Header Field with Indexing</a></li>
                     <li><a href="#rfc.section.D.1.2">D.1.2</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.1.2">Literal Header Field without Indexing</a></li>
                     <li><a href="#rfc.section.D.1.3">D.1.3</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.1.3">Indexed Header Field</a></li>
                     <li><a href="#rfc.section.D.1.4">D.1.4</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.1.4">Indexed Header Field from Static Table</a></li>
                  </ul>
               </li>
               <li><a href="#rfc.section.D.2">D.2</a>&nbsp;&nbsp;&nbsp;<a href="#request.examples.without.huffman">Request Examples without Huffman</a><ul>
                     <li><a href="#rfc.section.D.2.1">D.2.1</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.2.1">First request</a></li>
                     <li><a href="#rfc.section.D.2.2">D.2.2</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.2.2">Second request</a></li>
                     <li><a href="#rfc.section.D.2.3">D.2.3</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.2.3">Third request</a></li>
                  </ul>
               </li>
               <li><a href="#rfc.section.D.3">D.3</a>&nbsp;&nbsp;&nbsp;<a href="#request.examples.with.huffman">Request Examples with Huffman</a><ul>
                     <li><a href="#rfc.section.D.3.1">D.3.1</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.3.1">First request</a></li>
                     <li><a href="#rfc.section.D.3.2">D.3.2</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.3.2">Second request</a></li>
                     <li><a href="#rfc.section.D.3.3">D.3.3</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.3.3">Third request</a></li>
                  </ul>
               </li>
               <li><a href="#rfc.section.D.4">D.4</a>&nbsp;&nbsp;&nbsp;<a href="#response.examples.without.huffman">Response Examples without Huffman</a><ul>
                     <li><a href="#rfc.section.D.4.1">D.4.1</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.4.1">First response</a></li>
                     <li><a href="#rfc.section.D.4.2">D.4.2</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.4.2">Second response</a></li>
                     <li><a href="#rfc.section.D.4.3">D.4.3</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.4.3">Third response</a></li>
                  </ul>
               </li>
               <li><a href="#rfc.section.D.5">D.5</a>&nbsp;&nbsp;&nbsp;<a href="#response.examples.with.huffman">Response Examples with Huffman</a><ul>
                     <li><a href="#rfc.section.D.5.1">D.5.1</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.5.1">First response</a></li>
                     <li><a href="#rfc.section.D.5.2">D.5.2</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.5.2">Second response</a></li>
                     <li><a href="#rfc.section.D.5.3">D.5.3</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.5.3">Third response</a></li>
                  </ul>
               </li>
            </ul>
         </li>
      </ul>
      <ul class="toc">
         <li>Figures
            
            <ul>
               <li><a href="#rfc.figure.1">Figure 1: Index Address Space</a></li>
               <li><a href="#rfc.figure.2">Figure 2: String Literal Representation</a></li>
               <li><a href="#rfc.figure.3">Figure 3: Indexed Header Field</a></li>
               <li><a href="#rfc.figure.4">Figure 4: Literal Header Field with Incremental Indexing -                         Indexed Name</a></li>
               <li><a href="#rfc.figure.5">Figure 5: Literal Header Field with Incremental Indexing -                         New Name</a></li>
               <li><a href="#rfc.figure.6">Figure 6: Literal Header Field without Indexing - Indexed Name</a></li>
               <li><a href="#rfc.figure.7">Figure 7: Literal Header Field without Indexing - New Name</a></li>
               <li><a href="#rfc.figure.8">Figure 8: Literal Header Field never Indexed - Indexed Name</a></li>
               <li><a href="#rfc.figure.9">Figure 9: Literal Header Field never Indexed - New Name</a></li>
               <li><a href="#rfc.figure.10">Figure 10: Context Update</a></li>
               <li><a href="#rfc.figure.11">Figure 11: Reference Set Emptying</a></li>
               <li><a href="#rfc.figure.12">Figure 12: Maximum Header Table Size Change</a></li>
            </ul>
         </li>
      </ul>
      <div>
         <h1 id="rfc.section.1" class="np"><a href="#rfc.section.1">1.</a>&nbsp;Introduction
         </h1>
         <p id="rfc.section.1.p.1">This specification defines HPACK, a compression format for efficiently representing HTTP header fields in the context of HTTP/2
            (see <a href="#HTTP2"><cite title="Hypertext Transfer Protocol version 2">[HTTP2]</cite></a>).
         </p>
      </div>
      <div id="overview">
         <h1 id="rfc.section.2"><a href="#rfc.section.2">2.</a>&nbsp;<a href="#overview">Overview</a></h1>
         <p id="rfc.section.2.p.1">In HTTP/1.1 (see <a href="#HTTP-p1"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[HTTP-p1]</cite></a>), header fields are encoded without any form of compression. As web pages have grown to include dozens to hundreds of requests,
            the redundant header fields in these requests now measurably increase latency and unnecessarily consume bandwidth (see <a href="#PERF1"><cite title="IETF83: SPDY and What to Consider for HTTP/2.0">[PERF1]</cite></a> and <a href="#PERF2"><cite title="SPDY: What I Like About You">[PERF2]</cite></a>).
         </p>
         <p id="rfc.section.2.p.2">SPDY <a href="#SPDY"><cite title="SPDY Protocol">[SPDY]</cite></a> initially addressed this redundancy by compressing header fields using the DEFLATE format <a href="#DEFLATE"><cite title="DEFLATE Compressed Data Format Specification version 1.3">[DEFLATE]</cite></a>, which proved very effective at efficiently representing the redundant header fields. However, that approach exposed a security
            risk as demonstrated by the CRIME attack (see <a href="#CRIME"><cite title="The CRIME Attack">[CRIME]</cite></a>).
         </p>
         <p id="rfc.section.2.p.3">This document describes HPACK, a new compressor for header fields which eliminates redundant header fields, is not vulnerable
            to known security attacks, and which also has a bounded memory requirement for use in constrained environments.
         </p>
         <div>
            <h2 id="rfc.section.2.1"><a href="#rfc.section.2.1">2.1</a>&nbsp;Outline
            </h2>
            <p id="rfc.section.2.1.p.1">The HTTP header field encoding defined in this document is based on a header table that maps name-value pairs to index values.
               The header table is incrementally updated during the HTTP/2 connection.
            </p>
            <p id="rfc.section.2.1.p.2">A set of header fields is treated as an unordered collection of name-value pairs. Names and values are considered to be opaque
               sequences of octets. The order of header fields is not guaranteed to be preserved after being compressed and decompressed.
            </p>
            <p id="rfc.section.2.1.p.3">As two consecutive sets of header fields often have header fields in common, each set is coded as a difference from the previous
               set. The goal is to only encode the changes (header fields present in one of the sets that are absent from the other) between
               the two sets of header fields.
            </p>
            <p id="rfc.section.2.1.p.4">A header field is represented either literally or as a reference to a name-value pair in the header table. A set of header
               fields is stored as a set of references to entries in the header table (possibly keeping only a subset of it, as some header
               fields may be missing a corresponding entry in the header table). Differences between consecutive sets of header fields are
               encoded as changes to the set of references.
            </p>
            <p id="rfc.section.2.1.p.5">The encoder is responsible for deciding which header fields to insert as new entries in the header table. The decoder executes
               the modifications to the header table and reference set prescribed by the encoder, reconstructing the set of header fields
               in the process. This enables decoders to remain simple and understand a wide variety of encoders.
            </p>
            <p id="rfc.section.2.1.p.6">Examples illustrating the use of these different mechanisms to represent header fields are available in <a href="#examples" title="Examples">Appendix&nbsp;D</a>.
            </p>
         </div>
      </div>
      <div id="header.encoding">
         <h1 id="rfc.section.3"><a href="#rfc.section.3">3.</a>&nbsp;<a href="#header.encoding">Header Field Encoding</a></h1>
         <div id="encoding.concepts">
            <h2 id="rfc.section.3.1"><a href="#rfc.section.3.1">3.1</a>&nbsp;<a href="#encoding.concepts">Encoding Concepts</a></h2>
            <p id="rfc.section.3.1.p.1">The encoding and decoding of header fields relies on some components and concepts: </p>
            <dl>
               <dt>Header Field:</dt>
               <dd>A name-value pair. Both the name and value are treated as opaque sequences of octets.</dd>
               <dt>Header Table:</dt>
               <dd>The header table (see <a href="#header.table" title="Header Table">Section&nbsp;3.1.2</a>) is a component used to associate stored header fields to index values.
               </dd>
               <dt>Static Table:</dt>
               <dd>The static table (see <a href="#static.table" title="Static Table">Appendix&nbsp;B</a>) is a component used to associate static header fields to index values. This data is ordered, read-only, always accessible,
                  and may be shared amongst all encoding contexts.
               </dd>
               <dt>Reference Set:</dt>
               <dd>The reference set (see <a href="#reference.set" title="Reference Set">Section&nbsp;3.1.3</a>) is a component containing an unordered set of references to entries in the header table. This is used for the differential
                  encoding of a new header set.
               </dd>
               <dt>Header Set:</dt>
               <dd>A header set is an unordered group of header fields that are encoded jointly. A complete set of key-value pairs contained
                  in a HTTP request or response is a header set.
               </dd>
               <dt>Header Field Representation:</dt>
               <dd>A header field can be represented in encoded form either as a literal or as an index (see <a href="#header.representation" title="Header Field Representation">Section&nbsp;3.1.4</a>).
               </dd>
               <dt>Header Block:</dt>
               <dd>The entire set of encoded header field representations which, when decoded, yield a complete header set.</dd>
               <dt>Header Field Emission:</dt>
               <dd>When decoding a set of header field representations, some operations emit a header field (see <a href="#header.emission" title="Header Field Emission">Section&nbsp;3.1.5</a>). Emitted header fields are added to the current header set and cannot be removed.
               </dd>
            </dl>
            <div id="encoding.context">
               <h3 id="rfc.section.3.1.1"><a href="#rfc.section.3.1.1">3.1.1</a>&nbsp;<a href="#encoding.context">Encoding Context</a></h3>
               <p id="rfc.section.3.1.1.p.1">The set of mutable structures used within an encoding context include a header table and a reference set. Everything else
                  is either immutable or conceptual.
               </p>
               <p id="rfc.section.3.1.1.p.2">HTTP messages are exchanged between a client and a server in both directions. The encoding of header fields in each direction
                  is independent from the other direction. There is a single encoding context for each direction used to encode all header fields
                  sent in that direction.
               </p>
            </div>
            <div id="header.table">
               <h3 id="rfc.section.3.1.2"><a href="#rfc.section.3.1.2">3.1.2</a>&nbsp;<a href="#header.table">Header Table</a></h3>
               <p id="rfc.section.3.1.2.p.1">A header table consists of a list of header fields maintained in first-in, first-out order. The first and newest entry in
                  a header table is always at index 1, and the oldest entry of a header table is at the index len(header table).
               </p>
               <p id="rfc.section.3.1.2.p.2">The header table is initially empty.</p>
               <p id="rfc.section.3.1.2.p.3">There is typically no need for the header table to contain duplicate entries. However, duplicate entries MUST NOT be treated
                  as an error by a decoder.
               </p>
               <p id="rfc.section.3.1.2.p.4">The encoder decides how to update the header table and as such can control how much memory is used by the header table. To
                  limit the memory requirements of the decoder, the header table size is strictly bounded (see <a href="#maximum.table.size" title="Maximum Table Size">Section&nbsp;3.3.1</a>).
               </p>
               <p id="rfc.section.3.1.2.p.5">The header table is updated during the processing of a set of header field representations (see <a href="#header.representation.processing" title="Header Field Representation Processing">Section&nbsp;3.2.1</a>).
               </p>
            </div>
            <div id="reference.set">
               <h3 id="rfc.section.3.1.3"><a href="#rfc.section.3.1.3">3.1.3</a>&nbsp;<a href="#reference.set">Reference Set</a></h3>
               <p id="rfc.section.3.1.3.p.1">A reference set is an unordered set of references to entries of the header table.</p>
               <p id="rfc.section.3.1.3.p.2">The reference set is initially empty.</p>
               <p id="rfc.section.3.1.3.p.3">The reference set is updated during the processing of a set of header field representations (see <a href="#header.representation.processing" title="Header Field Representation Processing">Section&nbsp;3.2.1</a>).
               </p>
               <p id="rfc.section.3.1.3.p.4">The reference set enables differential encoding, whereby only differences between the previous header set and the current
                  header set need to be encoded. The use of differential encoding is optional for any header set.
               </p>
               <p id="rfc.section.3.1.3.p.5">When an entry is evicted from the header table, if it was referenced from the reference set, its reference is removed from
                  the reference set.
               </p>
               <p id="rfc.section.3.1.3.p.6">To limit the memory requirements on the decoder side for handling the reference set, only entries within the header table
                  can be contained in the reference set. To still allow entries from the static table to take advantage of the differential
                  encoding, when a header field is represented as a reference to an entry of the static table, this entry is inserted into the
                  header table (see <a href="#header.representation.processing" title="Header Field Representation Processing">Section&nbsp;3.2.1</a>).
               </p>
            </div>
            <div id="header.representation">
               <h3 id="rfc.section.3.1.4"><a href="#rfc.section.3.1.4">3.1.4</a>&nbsp;<a href="#header.representation">Header Field Representation</a></h3>
               <p id="rfc.section.3.1.4.p.1">An encoded header field can be represented either as a literal or as an index.</p>
               <p id="rfc.section.3.1.4.p.2"></p>
               <dl>
                  <dt>Literal Representation:</dt>
                  <dd>A literal representation defines a new header field. The header field name is represented either literally or as a reference
                     to an entry of the header table. The header field value is represented literally.
                  </dd>
                  <dd>Two different literal representations are provided: 
                     <ul>
                        <li>A literal representation that does not add the header field to the header table (see <a href="#literal.header.without.indexing" title="Literal Header Field without Indexing">Section&nbsp;4.3.2</a>).
                        </li>
                        <li>A literal representation that adds the header field as a new entry at the beginning of the header table (see <a href="#literal.header.with.incremental.indexing" title="Literal Header Field with Incremental Indexing">Section&nbsp;4.3.1</a>).
                        </li>
                     </ul> 
                  </dd>
                  <dt>Indexed Representation:</dt>
                  <dd>The indexed representation defines a header field as a reference to an entry in either the header table or the static table
                     (see <a href="#indexed.header.representation" title="Indexed Header Field Representation">Section&nbsp;4.2</a>). 
                     <div id="rfc.figure.1"></div><pre class="drawing">       &lt;----------  Index Address Space ----------&gt;
       &lt;-- Header  Table --&gt;  &lt;-- Static  Table --&gt;
       +---+-----------+---+  +---+-----------+---+
       | 1 |    ...    | k |  |k+1|    ...    | n |
       +---+-----------+---+  +---+-----------+---+
       ^                   |
       |                   V
Insertion Point       Drop Point
</pre><p class="figure">Figure 1: Index Address Space</p> 
                     <ul class="empty">
                        <li>Indices between 1 and len(header table), inclusive, refer to elements in the header table, with index 1 referring to the beginning
                           of the table.
                        </li>
                        <li>Indices between len(header table) + 1 and len(header table) + len(static table), inclusive, refer to elements in the static
                           table, where the index len(header table) + 1 refers to the first entry in the static table.
                        </li>
                        <li>Index 0 signals a modification of the encoding context: either the reference set is emptied, or the maximum size of the header
                           table is updated (see <a href="#encoding.context.update" title="Encoding Context Update">Section&nbsp;4.4</a>).
                        </li>
                        <li>Any other indices MUST be treated as erroneous, and the compression context considered corrupt and unusable.</li>
                     </ul> 
                  </dd>
               </dl>
            </div>
            <div id="header.emission">
               <h3 id="rfc.section.3.1.5"><a href="#rfc.section.3.1.5">3.1.5</a>&nbsp;<a href="#header.emission">Header Field Emission</a></h3>
               <p id="rfc.section.3.1.5.p.1">The emission of a header field is the process of marking a header field as belonging to the current header set. Once a header
                  has been emitted, it cannot be removed from the current header set.
               </p>
               <p id="rfc.section.3.1.5.p.2">On the decoding side, an emitted header field can be safely passed to the upper processing layer as part of the current header
                  set. The decoder MAY pass the emitted header fields to the upper processing layer in any order.
               </p>
               <p id="rfc.section.3.1.5.p.3">By emitting header fields instead of emitting header sets, the decoder can be implemented in a streaming way, and as such
                  has only to keep in memory the header table and the reference set. This bounds the amount of memory used by the decoder, even
                  in presence of a very large set of header fields. The management of memory for handling very large sets of header fields can
                  therefore be deferred to the upper processing layers.
               </p>
            </div>
         </div>
         <div id="header.block.decoding">
            <h2 id="rfc.section.3.2"><a href="#rfc.section.3.2">3.2</a>&nbsp;<a href="#header.block.decoding">Header Block Decoding</a></h2>
            <p id="rfc.section.3.2.p.1">The processing of a header block to obtain a header set is defined in this section. To ensure that the decoding will successfully
               produce a header set, a decoder MUST obey the following rules.
            </p>
            <div id="header.representation.processing">
               <h3 id="rfc.section.3.2.1"><a href="#rfc.section.3.2.1">3.2.1</a>&nbsp;<a href="#header.representation.processing">Header Field Representation Processing</a></h3>
               <p id="rfc.section.3.2.1.p.1">All the header field representations contained in a header block are processed in the order in which they are presented, as
                  specified below.
               </p>
               <p id="rfc.section.3.2.1.p.2">An <em>indexed representation</em> with an index value of 0 entails one of the following actions, depending on what is encoded next: 
               </p>
               <ul>
                  <li>The reference set is emptied.</li>
                  <li>The maximum size of the header table is updated.</li>
               </ul>
               <p id="rfc.section.3.2.1.p.3">An <em>indexed representation</em> corresponding to an entry <em>present</em> in the reference set entails the following actions: 
               </p>
               <ul>
                  <li>The entry is removed from the reference set.</li>
               </ul>
               <p id="rfc.section.3.2.1.p.4">An <em>indexed representation</em> corresponding to an entry <em>not present</em> in the reference set entails the following actions: 
               </p>
               <ul>
                  <li>If referencing an element of the static table: 
                     <ul>
                        <li>The header field corresponding to the referenced entry is emitted.</li>
                        <li>The referenced static entry is inserted at the beginning of the header table.</li>
                        <li>A reference to this new header table entry is added to the reference set (except if this new entry didn't fit in the header
                           table).
                        </li>
                     </ul> 
                  </li>
                  <li>If referencing an element of the header table: 
                     <ul>
                        <li>The header field corresponding to the referenced entry is emitted.</li>
                        <li>The referenced header table entry is added to the reference set.</li>
                     </ul> 
                  </li>
               </ul>
               <p id="rfc.section.3.2.1.p.5">A <em>literal representation</em> that is <em>not added</em> to the header table entails the following action: 
               </p>
               <ul>
                  <li>The header field is emitted.</li>
               </ul>
               <p id="rfc.section.3.2.1.p.6">A <em>literal representation</em> that is <em>added</em> to the header table entails the following actions: 
               </p>
               <ul>
                  <li>The header field is emitted.</li>
                  <li>The header field is inserted at the beginning of the header table.</li>
                  <li>A reference to the new entry is added to the reference set (except if this new entry didn't fit in the header table).</li>
               </ul>
            </div>
            <div id="reference.set.emission">
               <h3 id="rfc.section.3.2.2"><a href="#rfc.section.3.2.2">3.2.2</a>&nbsp;<a href="#reference.set.emission">Reference Set Emission</a></h3>
               <p id="rfc.section.3.2.2.p.1">Once all the representations contained in a header block have been processed, the header fields referenced in the reference
                  set which have not previously been emitted during this processing are emitted.
               </p>
            </div>
            <div id="header.set.completion">
               <h3 id="rfc.section.3.2.3"><a href="#rfc.section.3.2.3">3.2.3</a>&nbsp;<a href="#header.set.completion">Header Set Completion</a></h3>
               <p id="rfc.section.3.2.3.p.1">Once all of the header field representations have been processed, and the remaining items in the reference set have been emitted,
                  the header set is complete.
               </p>
            </div>
         </div>
         <div id="header.table.management">
            <h2 id="rfc.section.3.3"><a href="#rfc.section.3.3">3.3</a>&nbsp;<a href="#header.table.management">Header Table Management</a></h2>
            <div id="maximum.table.size">
               <h3 id="rfc.section.3.3.1"><a href="#rfc.section.3.3.1">3.3.1</a>&nbsp;<a href="#maximum.table.size">Maximum Table Size</a></h3>
               <p id="rfc.section.3.3.1.p.1">To limit the memory requirements on the decoder side, the size of the header table is bounded. The size of the header table
                  MUST stay lower than or equal to its maximum size.
               </p>
               <p id="rfc.section.3.3.1.p.2">By default, the maximum size of the header table is equal to the value of the HTTP/2 setting SETTINGS_HEADER_TABLE_SIZE defined
                  by the decoder (see <a href="#HTTP2"><cite title="Hypertext Transfer Protocol version 2">[HTTP2]</cite></a>). The encoder can change this maximum size (see <a href="#encoding.context.update" title="Encoding Context Update">Section&nbsp;4.4</a>), but it must stay lower than or equal to the value of SETTINGS_HEADER_TABLE_SIZE.
               </p>
               <p id="rfc.section.3.3.1.p.3">The size of the header table is the sum of the size of its entries.</p>
               <p id="rfc.section.3.3.1.p.4">The size of an entry is the sum of its name's length in octets (as defined in <a href="#string.literal.representation" title="String Literal Representation">Section&nbsp;4.1.2</a>), of its value's length in octets (<a href="#string.literal.representation" title="String Literal Representation">Section&nbsp;4.1.2</a>) and of 32 octets.
               </p>
               <p id="rfc.section.3.3.1.p.5">The lengths are measured on the non-encoded entry name and entry value (for the case when a Huffman encoding is used to transmit
                  string values).
               </p>
               <p id="rfc.section.3.3.1.p.6">The 32 octets are an accounting for the entry structure overhead. For example, an entry structure using two 64-bits pointers
                  to reference the name and the value and the entry, and two 64-bits integer for counting the number of references to these
                  name and value would use 32 octets.
               </p>
            </div>
            <div id="entry.eviction">
               <h3 id="rfc.section.3.3.2"><a href="#rfc.section.3.3.2">3.3.2</a>&nbsp;<a href="#entry.eviction">Entry Eviction When Header Table Size Changes</a></h3>
               <p id="rfc.section.3.3.2.p.1">Whenever an entry is evicted from the header table, any reference to that entry contained by the reference set is removed.</p>
               <p id="rfc.section.3.3.2.p.2">Whenever the maximum size for the header table is made smaller, entries are evicted from the end of the header table until
                  the size of the header table is less than or equal to the maximum size.
               </p>
               <p id="rfc.section.3.3.2.p.3">The eviction of an entry from the header table causes the index of the entries in the static table to be reduced by one.</p>
            </div>
            <div id="entry.addition">
               <h3 id="rfc.section.3.3.3"><a href="#rfc.section.3.3.3">3.3.3</a>&nbsp;<a href="#entry.addition">Entry Eviction when Adding New Entries</a></h3>
               <p id="rfc.section.3.3.3.p.1">Whenever a new entry is to be added to the table, any name referenced by the representation of this new entry is cached, and
                  then entries are evicted from the end of the header table until the size of the header table is less than or equal to (maximum
                  size - new entry size), or until the table is empty.
               </p>
               <p id="rfc.section.3.3.3.p.2">If the size of the new entry is less than or equal to the maximum size, that entry is added to the table. It is not an error
                  to attempt to add an entry that is larger than the maximum size.
               </p>
            </div>
         </div>
      </div>
      <div id="detailed.format">
         <h1 id="rfc.section.4"><a href="#rfc.section.4">4.</a>&nbsp;<a href="#detailed.format">Detailed Format</a></h1>
         <div id="low-level.representation">
            <h2 id="rfc.section.4.1"><a href="#rfc.section.4.1">4.1</a>&nbsp;<a href="#low-level.representation">Low-level representations</a></h2>
            <div id="integer.representation">
               <h3 id="rfc.section.4.1.1"><a href="#rfc.section.4.1.1">4.1.1</a>&nbsp;<a href="#integer.representation">Integer representation</a></h3>
               <p id="rfc.section.4.1.1.p.1">Integers are used to represent name indexes, pair indexes or string lengths. To allow for optimized processing, an integer
                  representation always finishes at the end of an octet.
               </p>
               <p id="rfc.section.4.1.1.p.2">An integer is represented in two parts: a prefix that fills the current octet and an optional list of octets that are used
                  if the integer value does not fit within the prefix. The number of bits of the prefix (called N) is a parameter of the integer
                  representation.
               </p>
               <p id="rfc.section.4.1.1.p.3">The N-bit prefix allows filling the current octet. If the value is small enough (strictly less than 2<sup>N</sup>-1), it is encoded within the N-bit prefix. Otherwise all the bits of the prefix are set to 1 and the value is encoded using
                  an <a href="http://en.wikipedia.org/wiki/Variable-length_quantity">unsigned variable length integer</a> representation. N is always between 1 and 8 bits. An integer starting at an octet-boundary will have an 8-bit prefix.
               </p>
               <p id="rfc.section.4.1.1.p.4">The algorithm to represent an integer I is as follows: </p>
               <div id="rfc.figure.u.1"></div><pre class="inline">if I &lt; 2^N - 1, encode I on N bits
else
    encode (2^N - 1) on N bits
    I = I - (2^N - 1)
    while I &gt;= 128
         encode (I % 128 + 128) on 8 bits
         I = I / 128
    encode I on 8 bits
</pre><p id="rfc.section.4.1.1.p.5">For informational purpose, the algorithm to decode an integer I is as follows: </p>
               <div id="rfc.figure.u.2"></div><pre class="inline">decode I from the next N bits
if I &lt; 2^N - 1, return I
else
    M = 0
    repeat
        B = next octet
        I = I + (B &amp; 127) * 2^M
        M = M + 7
    while B &amp; 128 == 128
    return I
</pre><p id="rfc.section.4.1.1.p.6">This integer representation allows for values of indefinite size. It is also possible for an encoder to send a large number
                  of zero values, which can waste octets and could be used to overflow integer values. Excessively large integer encodings -
                  in value or octet length - MUST be treated as a decoding error. Different limits can be set for each of the different uses
                  of integers, based on implementation constraints.
               </p>
               <div id="integer.representation.example1">
                  <h4 id="rfc.section.4.1.1.1"><a href="#rfc.section.4.1.1.1">4.1.1.1</a>&nbsp;<a href="#integer.representation.example1">Example 1: Encoding 10 using a 5-bit prefix</a></h4>
                  <p id="rfc.section.4.1.1.1.p.1">The value 10 is to be encoded with a 5-bit prefix. </p>
                  <ul>
                     <li>10 is less than 31 (= 2<sup>5</sup> - 1) and is represented using the 5-bit prefix.
                     </li>
                  </ul>
                  <div id="rfc.figure.u.3"></div><pre class="inline">  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| X | X | X | 0 | 1 | 0 | 1 | 0 |   10 stored on 5 bits
+---+---+---+---+---+---+---+---+
</pre></div>
               <div id="integer.representation.example2">
                  <h4 id="rfc.section.4.1.1.2"><a href="#rfc.section.4.1.1.2">4.1.1.2</a>&nbsp;<a href="#integer.representation.example2">Example 2: Encoding 1337 using a 5-bit prefix</a></h4>
                  <p id="rfc.section.4.1.1.2.p.1">The value I=1337 is to be encoded with a 5-bit prefix. </p>
                  <ul class="empty">
                     <li>1337 is greater than 31 (= 2<sup>5</sup> - 1).
                     </li>
                     <li>
                        <ul class="empty">
                           <li>The 5-bit prefix is filled with its max value (31).</li>
                        </ul> 
                     </li>
                     <li>I = 1337 - (2<sup>5</sup> - 1) = 1306.
                     </li>
                     <li>
                        <ul class="empty">
                           <li>I (1306) is greater than or equal to 128, the while loop body executes:</li>
                           <li>
                              <ul class="empty">
                                 <li>I % 128 == 26</li>
                                 <li>26 + 128 == 154</li>
                                 <li>154 is encoded in 8 bits as: 10011010</li>
                                 <li>I is set to 10 (1306 / 128 == 10)</li>
                                 <li>I is no longer greater than or equal to 128, the while loop terminates.</li>
                              </ul> 
                           </li>
                           <li>I, now 10, is encoded on 8 bits as: 00001010</li>
                        </ul> 
                     </li>
                     <li>The process ends.</li>
                  </ul>
                  <div id="rfc.figure.u.4"></div><pre class="inline">  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| X | X | X | 1 | 1 | 1 | 1 | 1 |  Prefix = 31, I = 1306
| 1 | 0 | 0 | 1 | 1 | 0 | 1 | 0 |  1306&gt;=128, encode(154), I=1306/128
| 0 | 0 | 0 | 0 | 1 | 0 | 1 | 0 |  10&lt;128, encode(10), done
+---+---+---+---+---+---+---+---+
</pre></div>
               <div id="integer.representation.example3">
                  <h4 id="rfc.section.4.1.1.3"><a href="#rfc.section.4.1.1.3">4.1.1.3</a>&nbsp;<a href="#integer.representation.example3">Example 3: Encoding 42 starting at an                         octet-boundary</a></h4>
                  <p id="rfc.section.4.1.1.3.p.1">The value 42 is to be encoded starting at an octet-boundary. This implies that a 8-bit prefix is used. </p>
                  <ul>
                     <li>42 is less than 255 (= 2<sup>8</sup> - 1) and is represented using the 8-bit prefix.
                     </li>
                  </ul>
                  <div id="rfc.figure.u.5"></div><pre class="inline">  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0 | 0 | 1 | 0 | 1 | 0 | 1 | 0 |   42 stored on 8 bits
+---+---+---+---+---+---+---+---+
</pre></div>
            </div>
            <div id="string.literal.representation">
               <h3 id="rfc.section.4.1.2"><a href="#rfc.section.4.1.2">4.1.2</a>&nbsp;<a href="#string.literal.representation">String Literal Representation</a></h3>
               <p id="rfc.section.4.1.2.p.1">Header field names and header field values can be represented as literal string. A literal string is encoded as a sequence
                  of octets, either by directly encoding the literal string's octets, or by using a canonical <a href="#CANON"><cite title="Generating a canonical prefix encoding">[CANON]</cite></a> Huffman encoding <a href="#HUFF"><cite title="A Method for the Construction of Minimum Redundancy Codes">[HUFF]</cite></a>.
               </p>
               <div id="rfc.figure.2"></div><pre class="inline">  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| H |    String Length (7+)     |
+---+---------------------------+
|  String Data (Length octets)  |
+-------------------------------+
</pre><p class="figure">Figure 2: String Literal Representation</p>
               <p id="rfc.section.4.1.2.p.3">A literal string representation contains the following fields:</p>
               <p id="rfc.section.4.1.2.p.4"></p>
               <dl>
                  <dt>H:</dt>
                  <dd>A one bit flag, H, indicating whether or not the octets of the string are Huffman encoded.</dd>
                  <dt>String Length:</dt>
                  <dd>The number of octets used to encode the string literal, encoded as an integer with 7-bit prefix (see <a href="#integer.representation" title="Integer representation">Section&nbsp;4.1.1</a>).
                  </dd>
                  <dt>String Data:</dt>
                  <dd>The encoded data of the string literal. If H is '0', then the encoded data is the raw octets of the string literal. If H is
                     '1', then the encoded data is the Huffman encoding of the string literal.
                  </dd>
               </dl>
               <p id="rfc.section.4.1.2.p.5">String literals which use Huffman encoding are encoded with the Huffman codes defined in <a href="#huffman.codes" title="Huffman Codes">Appendix&nbsp;C</a> (see examples inRequest Examples with Huffman <a href="#request.examples.with.huffman" title="Request Examples with Huffman">Appendix&nbsp;D.3</a> and in Response Examples with Huffman <a href="#response.examples.with.huffman" title="Response Examples with Huffman">Appendix&nbsp;D.5</a>). The encoded data is the bitwise concatenation of the Huffman codes corresponding to each octet of the string literal.
               </p>
               <p id="rfc.section.4.1.2.p.6">As the Huffman encoded data doesn't always end at an octet boundary, some padding is inserted after it up to the next octet
                  boundary. To prevent this padding to be misinterpreted as part of the string literal, the most significant bits of the EOS
                  (end-of-string) entry in the Huffman table are used.
               </p>
               <p id="rfc.section.4.1.2.p.7">Upon decoding, an incomplete Huffman code at the end of the encoded data is to be considered as padding and discarded. A padding
                  strictly longer than 7 bits MUST be treated as a decoding error. A padding not corresponding to the most significant bits
                  of the EOS entry MUST be treated as a decoding error. A Huffman encoded string literal containing the EOS entry MUST be treated
                  as a decoding error.
               </p>
            </div>
         </div>
         <div id="indexed.header.representation">
            <h2 id="rfc.section.4.2"><a href="#rfc.section.4.2">4.2</a>&nbsp;<a href="#indexed.header.representation">Indexed Header Field Representation</a></h2>
            <p id="rfc.section.4.2.p.1">An indexed header field representation either identifies an entry in the header table or static table. The processing of an
               indexed header field representation is described in <a href="#header.representation.processing" title="Header Field Representation Processing">Section&nbsp;3.2.1</a>.
            </p>
            <div id="rfc.figure.3"></div><pre class="inline">  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 1 |        Index (7+)         |
+---+---------------------------+
</pre><p class="figure">Figure 3: Indexed Header Field</p>
            <p id="rfc.section.4.2.p.3">This representation starts with the '1' 1-bit pattern, followed by the index of the matching pair, represented as an integer
               with a 7-bit prefix.
            </p>
            <p id="rfc.section.4.2.p.4">The index value of 0 is not used. It MUST be treated as a decoding error if found in an indexed header field representation.</p>
         </div>
         <div id="literal.header.representation">
            <h2 id="rfc.section.4.3"><a href="#rfc.section.4.3">4.3</a>&nbsp;<a href="#literal.header.representation">Literal Header Field Representation</a></h2>
            <p id="rfc.section.4.3.p.1">Literal header field representations contain a literal header field value. Header field names are either provided as a literal
               or by reference to an existing header table or static table entry.
            </p>
            <p id="rfc.section.4.3.p.2">Literal representations all result in the emission of a header field when decoded.</p>
            <div id="literal.header.with.incremental.indexing">
               <h3 id="rfc.section.4.3.1"><a href="#rfc.section.4.3.1">4.3.1</a>&nbsp;<a href="#literal.header.with.incremental.indexing">Literal Header Field with Incremental Indexing</a></h3>
               <p id="rfc.section.4.3.1.p.1">A literal header field with incremental indexing adds a new entry to the header table.</p>
               <div id="rfc.figure.4"></div><pre class="inline">  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0 | 1 |      Index (6+)       |
+---+---+-----------------------+
| H |     Value Length (7+)     |
+---+---------------------------+
| Value String (Length octets)  |
+-------------------------------+
</pre><p class="figure">Figure 4: Literal Header Field with Incremental Indexing -                         Indexed Name</p>
               <div id="rfc.figure.5"></div><pre class="inline">  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0 | 1 |           0           |
+---+---+-----------------------+
| H |     Name Length (7+)      |
+---+---------------------------+
|  Name String (Length octets)  |
+---+---------------------------+
| H |     Value Length (7+)     |
+---+---------------------------+
| Value String (Length octets)  |
+-------------------------------+
</pre><p class="figure">Figure 5: Literal Header Field with Incremental Indexing -                         New Name</p>
               <p id="rfc.section.4.3.1.p.4">This representation starts with the '01' 2-bit pattern.</p>
               <p id="rfc.section.4.3.1.p.5">If the header field name matches the header field name of a (name, value) pair stored in the Header Table or Static Table,
                  the header field name can be represented using the index of that entry. In this case, the index of the entry, index (which
                  is strictly greater than 0), is represented as an integer with a 6-bit prefix (see <a href="#integer.representation" title="Integer representation">Section&nbsp;4.1.1</a>).
               </p>
               <p id="rfc.section.4.3.1.p.6">Otherwise, the header field name is represented as a literal. The value 0 is represented on 6 bits followed by the header
                  field name (see <a href="#string.literal.representation" title="String Literal Representation">Section&nbsp;4.1.2</a>).
               </p>
               <p id="rfc.section.4.3.1.p.7">The header field name representation is followed by the header field value represented as a literal string as described in <a href="#string.literal.representation" title="String Literal Representation">Section&nbsp;4.1.2</a>.
               </p>
            </div>
            <div id="literal.header.without.indexing">
               <h3 id="rfc.section.4.3.2"><a href="#rfc.section.4.3.2">4.3.2</a>&nbsp;<a href="#literal.header.without.indexing">Literal Header Field without Indexing</a></h3>
               <p id="rfc.section.4.3.2.p.1">A literal header field without indexing causes the emission of a header field without altering the header table.</p>
               <div id="rfc.figure.6"></div><pre class="inline">  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0 | 0 | 0 | 0 |  Index (4+)   |
+---+---+-----------------------+
| H |     Value Length (7+)     |
+---+---------------------------+
| Value String (Length octets)  |
+-------------------------------+
</pre><p class="figure">Figure 6: Literal Header Field without Indexing - Indexed Name</p>
               <div id="rfc.figure.7"></div><pre class="inline">  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0 | 0 | 0 | 0 |       0       |
+---+---+-----------------------+
| H |     Name Length (7+)      |
+---+---------------------------+
|  Name String (Length octets)  |
+---+---------------------------+
| H |     Value Length (7+)     |
+---+---------------------------+
| Value String (Length octets)  |
+-------------------------------+
</pre><p class="figure">Figure 7: Literal Header Field without Indexing - New Name</p>
               <p id="rfc.section.4.3.2.p.4">The literal header field without indexing representation starts with the '0000' 4-bit pattern.</p>
               <p id="rfc.section.4.3.2.p.5">If the header field name matches the header field name of a (name, value) pair stored in the Header Table or Static Table,
                  the header field name can be represented using the index of that entry. In this case, the index of the entry, index (which
                  is strictly greater than 0), is represented as an integer with a 6-bit prefix (see <a href="#integer.representation" title="Integer representation">Section&nbsp;4.1.1</a>).
               </p>
               <p id="rfc.section.4.3.2.p.6">Otherwise, the header field name is represented as a literal. The value 0 is represented on 4 bits followed by the header
                  field name (see <a href="#string.literal.representation" title="String Literal Representation">Section&nbsp;4.1.2</a>).
               </p>
               <p id="rfc.section.4.3.2.p.7">The header field name representation is followed by the header field value represented as a literal string as described in <a href="#string.literal.representation" title="String Literal Representation">Section&nbsp;4.1.2</a>.
               </p>
            </div>
            <div id="literal.header.never.indexed">
               <h3 id="rfc.section.4.3.3"><a href="#rfc.section.4.3.3">4.3.3</a>&nbsp;<a href="#literal.header.never.indexed">Literal Header Field never Indexed</a></h3>
               <p id="rfc.section.4.3.3.p.1">A literal header field never indexed causes the emission of a header field without altering the header table.</p>
               <div id="rfc.figure.8"></div><pre class="inline">  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0 | 0 | 0 | 1 |  Index (4+)   |
+---+---+-----------------------+
| H |     Value Length (7+)     |
+---+---------------------------+
| Value String (Length octets)  |
+-------------------------------+
</pre><p class="figure">Figure 8: Literal Header Field never Indexed - Indexed Name</p>
               <div id="rfc.figure.9"></div><pre class="inline">  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0 | 0 | 0 | 1 |       0       |
+---+---+-----------------------+
| H |     Name Length (7+)      |
+---+---------------------------+
|  Name String (Length octets)  |
+---+---------------------------+
| H |     Value Length (7+)     |
+---+---------------------------+
| Value String (Length octets)  |
+-------------------------------+
</pre><p class="figure">Figure 9: Literal Header Field never Indexed - New Name</p>
               <p id="rfc.section.4.3.3.p.4">The literal header field never indexed representation starts with the '0001' 4-bit pattern.</p>
               <p id="rfc.section.4.3.3.p.5">When a header field is represented as a literal header field never indexed, it MUST always be encoded with this same representation.
                  In particular, an intermediary receiving a header field represented as a literal header field never indexed MUST use the same
                  representation to forward this header field.
               </p>
               <p id="rfc.section.4.3.3.p.6">The encoding of the representation is the same as for the literal header field without indexing representation (see <a href="#literal.header.without.indexing" title="Literal Header Field without Indexing">Section&nbsp;4.3.2</a>).
               </p>
            </div>
         </div>
         <div id="encoding.context.update">
            <h2 id="rfc.section.4.4"><a href="#rfc.section.4.4">4.4</a>&nbsp;<a href="#encoding.context.update">Encoding Context Update</a></h2>
            <p id="rfc.section.4.4.p.1">An encoding context update causes the immediate application of a change to the encoding context.</p>
            <div id="rfc.figure.10"></div><pre class="inline">  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0 | 0 | 1 | F |      ...      |
+---+---------------------------+
</pre><p class="figure">Figure 10: Context Update</p>
            <p id="rfc.section.4.4.p.3">An encoding context update starts with the '001' 3-bit pattern.</p>
            <p id="rfc.section.4.4.p.4">It is followed by a flag specifying the type of the change, and by any data necessary to describe the change itself.</p>
            <div id="rfc.figure.11"></div><pre class="inline">  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0 | 0 | 1 | 1 |       0       |
+---+---------------------------+
</pre><p class="figure">Figure 11: Reference Set Emptying</p>
            <p id="rfc.section.4.4.p.6">The flag bit being set to '1' signals that the reference set is emptied. The remaining bits are set to '0'.</p>
            <div id="rfc.figure.12"></div><pre class="inline">  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0 | 0 | 1 | 0 | Max size (4+) |
+---+---------------------------+
</pre><p class="figure">Figure 12: Maximum Header Table Size Change</p>
            <p id="rfc.section.4.4.p.8">The flag bit being set to '0' signals that a change to the maximum size of the header table. This new maximum size MUST be
               lower than or equal to the value of the setting SETTINGS_HEADER_TABLE_SIZE (see <a href="#HTTP2"><cite title="Hypertext Transfer Protocol version 2">[HTTP2]</cite></a>).
            </p>
            <p id="rfc.section.4.4.p.9">The new maximum size is encoded as an integer with a 4-bit prefix.</p>
            <p id="rfc.section.4.4.p.10">Change in the maximum size of the header table can trigger entry evictions (see <a href="#entry.eviction" title="Entry Eviction When Header Table Size Changes">Section&nbsp;3.3.2</a>).
            </p>
         </div>
      </div>
      <div id="Security">
         <h1 id="rfc.section.5"><a href="#rfc.section.5">5.</a>&nbsp;<a href="#Security">Security Considerations</a></h1>
         <div>
            <h2 id="rfc.section.5.1"><a href="#rfc.section.5.1">5.1</a>&nbsp;Compression-based Attacks
            </h2>
            <p id="rfc.section.5.1.p.1">Compression can create a weak point allowing an attacker to recover secret data. For example, the CRIME attack (see <a href="#CRIME"><cite title="The CRIME Attack">[CRIME]</cite></a>) took advantage of the DEFLATE mechanism (see <a href="#DEFLATE"><cite title="DEFLATE Compressed Data Format Specification version 1.3">[DEFLATE]</cite></a>) of SPDY (see <a href="#SPDY"><cite title="SPDY Protocol">[SPDY]</cite></a>) to efficiently probe the compression context. The full-text compression mechanism of DEFLATE allowed the attacker to learn
               some information from each failed attempt at guessing the secret.
            </p>
            <p id="rfc.section.5.1.p.2">For this reason, HPACK provides only limited compression mechanisms in the form of an indexing table and of a static Huffman
               encoding.
            </p>
            <p id="rfc.section.5.1.p.3">The indexing table can still provide information to an attacker that would be able to probe the compression context. However,
               this information is limited to the knowledge of whether the attacker's guess is correct or not.
            </p>
            <p id="rfc.section.5.1.p.4">Still, an attacker could take advantage of this limited information for breaking low-entropy secrets using a brute-force attack.
               A server usually has some protections against such brute-force attack. Here, the attack would target the client, where it
               would be harder to detect. The attack would be even more dangerous if the attacker is able to prevent the traffic generated
               by its brute-force attack from reaching the server.
            </p>
            <p id="rfc.section.5.1.p.5">To offer some protection against such type of attacks, HPACK enables an endpoint to indicate that a header field must never
               be compressed, across any hop up to the other endpoint (see <a href="#literal.header.never.indexed" title="Literal Header Field never Indexed">Section&nbsp;4.3.3</a>). An endpoint MUST use this feature to prevent the compression of any header field whose value contains a secret which could
               be put at risk by a brute-force attack.
            </p>
            <p id="rfc.section.5.1.p.6">There is currently no known threat taking advantage of the use of a fixed Huffman encoding. A study has shown that using a
               fixed Huffman encoding table created an information leakage, however this same study concluded that an attacker could not
               take advantage of this information leakage to recover any meaningful amount of information (see <a href="#PETAL"><cite title="PETAL: Preset Encoding Table Information Leakage">[PETAL]</cite></a>).
            </p>
         </div>
         <div>
            <h2 id="rfc.section.5.2"><a href="#rfc.section.5.2">5.2</a>&nbsp;Memory Consumption
            </h2>
            <p id="rfc.section.5.2.p.1">An attacker can try to cause an endpoint to exhaust its memory. HPACK is designed to limit both the peak and state amounts
               of memory allocated by an endpoint.
            </p>
            <p id="rfc.section.5.2.p.2">The amount of memory used by the compressor state is limited by the value of the setting SETTINGS_HEADER_TABLE_SIZE. This
               limitation takes into account both the size of the data stored in the header table, and the overhead required by the table
               structure itself.
            </p>
            <p id="rfc.section.5.2.p.3">For the decoding side, an endpoint can limit the amount of state memory used by setting an appropriate value for SETTINGS_HEADER_TABLE_SIZE.
               For the encoding side, the endpoint can limit the amount of state memory it uses by defining a header table maximum size lower
               than the value of SETTINGS_HEADER_TABLE_SIZE defined by its peer (see <a href="#encoding.context.update" title="Encoding Context Update">Section&nbsp;4.4</a>).
            </p>
            <p id="rfc.section.5.2.p.4">The amount of temporary memory consumed is linked to the set of header fields emitted or received. However, this amount of
               temporary memory can be limited by processing these header fields in a streaming manner.
            </p>
         </div>
         <div>
            <h2 id="rfc.section.5.3"><a href="#rfc.section.5.3">5.3</a>&nbsp;Implementation Limits
            </h2>
            <p id="rfc.section.5.3.p.1">An implementation of HPACK needs to ensure that large values for integers, long encoding for integers, or long string literal
               do not create security weaknesses.
            </p>
            <p id="rfc.section.5.3.p.2">An implementation has to set a limit for the values it accepts for integers, as well as for the encoded length (see <a href="#integer.representation" title="Integer representation">Section&nbsp;4.1.1</a>). In the same way, it has to set a limit to the length it accepts for string literals (see <a href="#string.literal.representation" title="String Literal Representation">Section&nbsp;4.1.2</a>).
            </p>
         </div>
      </div>
      <div>
         <h1 id="rfc.section.6"><a href="#rfc.section.6">6.</a>&nbsp;Acknowledgements
         </h1>
         <p id="rfc.section.6.p.1">This document includes substantial editorial contributions from the following individuals: Mike Bishop, Jeff Pinner, Julian
            Reschke, Martin Thomson.
         </p>
      </div>
      <h1 id="rfc.references"><a id="rfc.section.7" href="#rfc.section.7">7.</a> References
      </h1>
      <h2 id="rfc.references.1"><a href="#rfc.section.7.1" id="rfc.section.7.1">7.1</a> Normative References
      </h2>
      <table>
         <tr>
            <td class="reference"><b id="HTTP-p1">[HTTP-p1]</b></td>
            <td class="top"><a href="mailto:fielding@gbiv.com" title="Adobe Systems Incorporated">Fielding, R., Ed.</a> and <a href="mailto:julian.reschke@greenbytes.de" title="greenbytes GmbH">J. Reschke, Ed.</a>, “<a href="http://tools.ietf.org/html/draft-ietf-httpbis-p1-messaging-26">Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing</a>”, Internet-Draft&nbsp;draft-ietf-httpbis-p1-messaging-26 (work in progress), February&nbsp;2014.
            </td>
         </tr>
         <tr>
            <td class="reference"><b id="HTTP2">[HTTP2]</b></td>
            <td class="top">Belshe, M., Peon, R., and M. Thomson, Ed., “<a href="http://tools.ietf.org/html/draft-ietf-httpbis-http2-10">Hypertext Transfer Protocol version 2</a>”, Internet-Draft&nbsp;draft-ietf-httpbis-http2-10 (work in progress), February&nbsp;2014.
            </td>
         </tr>
      </table>
      <h2 id="rfc.references.2"><a href="#rfc.section.7.2" id="rfc.section.7.2">7.2</a> Informative References
      </h2>
      <table>
         <tr>
            <td class="reference"><b id="CANON">[CANON]</b></td>
            <td class="top">Schwartz, E. and B. Kallick, “<a href="http://dl.acm.org/citation.cfm?id=363991">Generating a canonical prefix encoding</a>”, Communications of the ACM&nbsp;Volume 7 Issue 3, pp. 166-169, March&nbsp;1964, &lt;<a href="http://dl.acm.org/citation.cfm?id=363991">http://dl.acm.org/citation.cfm?id=363991</a>&gt;.
            </td>
         </tr>
         <tr>
            <td class="reference"><b id="CRIME">[CRIME]</b></td>
            <td class="top">Rizzo, J. and T. Duong, “<a href="https://docs.google.com/a/twist.com/presentation/d/11eBmGiHbYcHR9gL5nDyZChu_-lCa2GizeuOfaLU2HOU/edit#slide=id.g1eb6c1b5_3_6">The CRIME Attack</a>”, September&nbsp;2012, &lt;<a href="https://docs.google.com/a/twist.com/presentation/d/11eBmGiHbYcHR9gL5nDyZChu_-lCa2GizeuOfaLU2HOU/edit#slide=id.g1eb6c1b5_3_6">https://docs.google.com/a/twist.com/presentation/d/11eBmGiHbYcHR9gL5nDyZChu_-lCa2GizeuOfaLU2HOU/edit#slide=id.g1eb6c1b5_3_6</a>&gt;.
            </td>
         </tr>
         <tr>
            <td class="reference"><b id="DEFLATE">[DEFLATE]</b></td>
            <td class="top">Deutsch, P., “<a href="http://tools.ietf.org/html/rfc1951">DEFLATE Compressed Data Format Specification version 1.3</a>”, RFC&nbsp;1951, May&nbsp;1996.
            </td>
         </tr>
         <tr>
            <td class="reference"><b id="HUFF">[HUFF]</b></td>
            <td class="top">Huffman, D., “<a href="http://ieeexplore.ieee.org/xpl/articleDetails.jsp?arnumber=4051119">A Method for the Construction of Minimum Redundancy Codes</a>”, Proceedings of the Institute of Radio Engineers&nbsp;Volume 40, Number 9, pp. 1098-1101, September&nbsp;1952, &lt;<a href="http://ieeexplore.ieee.org/xpl/articleDetails.jsp?arnumber=4051119">http://ieeexplore.ieee.org/xpl/articleDetails.jsp?arnumber=4051119</a>&gt;.
            </td>
         </tr>
         <tr>
            <td class="reference"><b id="PERF1">[PERF1]</b></td>
            <td class="top">Belshe, M., “<a href="http://www.ietf.org/proceedings/83/slides/slides-83-httpbis-3">IETF83: SPDY and What to Consider for HTTP/2.0</a>”, March&nbsp;2012, &lt;<a href="http://www.ietf.org/proceedings/83/slides/slides-83-httpbis-3">http://www.ietf.org/proceedings/83/slides/slides-83-httpbis-3</a>&gt;.
            </td>
         </tr>
         <tr>
            <td class="reference"><b id="PERF2">[PERF2]</b></td>
            <td class="top">McManus, P., “<a href="http://bitsup.blogspot.com/2011/09/spdy-what-i-like-about-you.html">SPDY: What I Like About You</a>”, September&nbsp;2011, &lt;<a href="http://bitsup.blogspot.com/2011/09/spdy-what-i-like-about-you.html">http://bitsup.blogspot.com/2011/09/spdy-what-i-like-about-you.html</a>&gt;.
            </td>
         </tr>
         <tr>
            <td class="reference"><b id="PETAL">[PETAL]</b></td>
            <td class="top">Tan, J. and J. Nahata, “<a href="http://www.pdl.cmu.edu/PDL-FTP/associated/CMU-PDL-13-106.pdf">PETAL: Preset Encoding Table Information Leakage</a>”, April&nbsp;2013, &lt;<a href="http://www.pdl.cmu.edu/PDL-FTP/associated/CMU-PDL-13-106.pdf">http://www.pdl.cmu.edu/PDL-FTP/associated/CMU-PDL-13-106.pdf</a>&gt;.
            </td>
         </tr>
         <tr>
            <td class="reference"><b id="SPDY">[SPDY]</b></td>
            <td class="top">Belshe, M. and R. Peon, “<a href="http://tools.ietf.org/html/draft-mbelshe-httpbis-spdy-00">SPDY Protocol</a>”, Internet-Draft&nbsp;draft-mbelshe-httpbis-spdy-00 (work in progress), February&nbsp;2012.
            </td>
         </tr>
      </table>
      <div class="avoidbreak">
         <h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
         <p><b>Roberto Peon</b><br>Google, Inc<br>Email: <a href="mailto:fenix@google.com">fenix@google.com</a></p>
         <p><b>Hervé Ruellan</b><br>Canon CRF<br>Email: <a href="mailto:herve.ruellan@crf.canon.fr">herve.ruellan@crf.canon.fr</a></p>
      </div>
      <div>
         <h1 id="rfc.section.A" class="np"><a href="#rfc.section.A">A.</a>&nbsp;Change Log (to be removed by RFC Editor before publication
         </h1>
         <div id="changes.since.draft-ietf-httpbis-header-compression-06">
            <h2 id="rfc.section.A.1"><a href="#rfc.section.A.1">A.1</a>&nbsp;<a href="#changes.since.draft-ietf-httpbis-header-compression-06">Since draft-ietf-httpbis-header-compression-06</a></h2>
            <ul>
               <li>Updated format to include literal headers that must never be compressed.</li>
            </ul>
         </div>
         <div id="changes.since.draft-ietf-httpbis-header-compression-05">
            <h2 id="rfc.section.A.2"><a href="#rfc.section.A.2">A.2</a>&nbsp;<a href="#changes.since.draft-ietf-httpbis-header-compression-05">Since draft-ietf-httpbis-header-compression-05</a></h2>
            <ul>
               <li>Regenerated examples.</li>
               <li>Only one Huffman table for requests and responses.</li>
               <li>Added maximum size for header table, independent of SETTINGS_HEADER_TABLE_SIZE.</li>
               <li>Added pseudo-code for integer decoding.</li>
               <li>Improved examples (removing unnecessary removals).</li>
            </ul>
         </div>
         <div id="changes.since.draft-ietf-httpbis-header-compression-04">
            <h2 id="rfc.section.A.3"><a href="#rfc.section.A.3">A.3</a>&nbsp;<a href="#changes.since.draft-ietf-httpbis-header-compression-04">Since draft-ietf-httpbis-header-compression-04</a></h2>
            <ul>
               <li>Updated examples: take into account changes in the spec, and show more features.</li>
               <li>Use 'octet' everywhere instead of having both 'byte' and 'octet'.</li>
               <li>Added reference set emptying.</li>
               <li>Editorial changes and clarifications.</li>
               <li>Added "host" header to the static table.</li>
               <li>Ordering for list of values (either NULL- or comma-separated).</li>
            </ul>
         </div>
         <div id="changes.since.draft-ietf-httpbis-header-compression-03">
            <h2 id="rfc.section.A.4"><a href="#rfc.section.A.4">A.4</a>&nbsp;<a href="#changes.since.draft-ietf-httpbis-header-compression-03">Since draft-ietf-httpbis-header-compression-03</a></h2>
            <ul>
               <li>A large number of editorial changes; changed the description of evicting/adding new entries.</li>
               <li>Removed substitution indexing</li>
               <li>Changed 'initial headers' to 'static headers', as per issue #258</li>
               <li>Merged 'request' and 'response' static headers, as per issue #259</li>
               <li>Changed text to indicate that new headers are added at index 0 and expire from the largest index, as per issue #233</li>
            </ul>
         </div>
         <div>
            <h2 id="rfc.section.A.5"><a href="#rfc.section.A.5">A.5</a>&nbsp;Since draft-ietf-httpbis-header-compression-02
            </h2>
            <ul>
               <li>Corrected error in integer encoding pseudocode.</li>
            </ul>
         </div>
         <div>
            <h2 id="rfc.section.A.6"><a href="#rfc.section.A.6">A.6</a>&nbsp;Since draft-ietf-httpbis-header-compression-01
            </h2>
            <p id="rfc.section.A.6.p.1"></p>
            <ul>
               <li>Refactored of Header Encoding Section: split definitions and processing rule.</li>
               <li>Backward incompatible change: Updated reference set management as per issue #214. This changes how the interaction between
                  the reference set and eviction works. This also changes the working of the reference set in some specific cases.
               </li>
               <li>Backward incompatible change: modified initial header list, as per issue #188.</li>
               <li>Added example of 32 octets entry structure (issue #191).</li>
               <li>Added Header Set Completion section. Reflowed some text. Clarified some writing which was akward. Added text about duplicate
                  header entry encoding. Clarified some language w.r.t Header Set. Changed x-my-header to mynewheader. Added text in the HeaderEmission
                  section indicating that the application may also be able to free up memory more quickly. Added information in Security Considerations
                  section.
               </li>
            </ul>
         </div>
         <div>
            <h2 id="rfc.section.A.7"><a href="#rfc.section.A.7">A.7</a>&nbsp;Since draft-ietf-httpbis-header-compression-00
            </h2>
            <p id="rfc.section.A.7.p.1"></p>
            <ul class="empty">
               <li>Fixed bug/omission in integer representation algorithm.</li>
               <li>Changed the document title.</li>
               <li>Header matching text rewritten.</li>
               <li>Changed the definition of header emission.</li>
               <li>Changed the name of the setting which dictates how much memory the compression context should use.</li>
               <li>Removed "specific use cases" section</li>
               <li>Corrected erroneous statement about what index can be contained in one octet</li>
               <li>Added descriptions of opcodes</li>
               <li>Removed security claims from introduction.</li>
            </ul>
         </div>
      </div>
      <div id="static.table">
         <h1 id="rfc.section.B"><a href="#rfc.section.B">B.</a>&nbsp;<a href="#static.table">Static Table</a></h1>
         <p id="rfc.section.B.p.1">The static table consists of an unchangeable ordered list of (name, value) pairs. The first entry in the table is always represented
            by the index len(header table) + 1, and the last entry in the table is represented by the index len(header table) + len(static
            table).
         </p>
         <p id="rfc.section.B.p.2"><span class="comment" id="rfc.comment.1">[<a href="#rfc.comment.1" class="smpl">rfc.comment.1</a>: The ordering of these tables is currently arbitrary. The tables in this section should be updated and ordered such that the
               table entries with the smallest indices are those which, based on a statistical analysis of the frequency of use weighted
               by size, achieve the largest decrease in octets transmitted subject to HTTP 2 header field rules (like removal of some header
               fields). This set of header fields is currently very likely incomplete, and should be made complete.]</span> <br> 
         </p>
         <p id="rfc.section.B.p.3">The following table lists the pre-defined header fields that make-up the static header table.</p>
         <div id="rfc.table.1">
            <div id="static.table.entries"></div>
            <table class="tt full center" cellpadding="3" cellspacing="0">
               <caption>Table 1: Static Table Entries</caption>
               <thead>
                  <tr>
                     <th>Index</th>
                     <th>Header Name</th>
                     <th>Header Value</th>
                  </tr>
               </thead>
               <tbody>
                  <tr>
                     <td class="left">1</td>
                     <td class="left">:authority</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">2</td>
                     <td class="left">:method</td>
                     <td class="left">GET</td>
                  </tr>
                  <tr>
                     <td class="left">3</td>
                     <td class="left">:method</td>
                     <td class="left">POST</td>
                  </tr>
                  <tr>
                     <td class="left">4</td>
                     <td class="left">:path</td>
                     <td class="left">/</td>
                  </tr>
                  <tr>
                     <td class="left">5</td>
                     <td class="left">:path</td>
                     <td class="left">/index.html</td>
                  </tr>
                  <tr>
                     <td class="left">6</td>
                     <td class="left">:scheme</td>
                     <td class="left">http</td>
                  </tr>
                  <tr>
                     <td class="left">7</td>
                     <td class="left">:scheme</td>
                     <td class="left">https</td>
                  </tr>
                  <tr>
                     <td class="left">8</td>
                     <td class="left">:status</td>
                     <td class="left">200</td>
                  </tr>
                  <tr>
                     <td class="left">9</td>
                     <td class="left">:status</td>
                     <td class="left">500</td>
                  </tr>
                  <tr>
                     <td class="left">10</td>
                     <td class="left">:status</td>
                     <td class="left">404</td>
                  </tr>
                  <tr>
                     <td class="left">11</td>
                     <td class="left">:status</td>
                     <td class="left">403</td>
                  </tr>
                  <tr>
                     <td class="left">12</td>
                     <td class="left">:status</td>
                     <td class="left">400</td>
                  </tr>
                  <tr>
                     <td class="left">13</td>
                     <td class="left">:status</td>
                     <td class="left">401</td>
                  </tr>
                  <tr>
                     <td class="left">14</td>
                     <td class="left">accept-charset</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">15</td>
                     <td class="left">accept-encoding</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">16</td>
                     <td class="left">accept-language</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">17</td>
                     <td class="left">accept-ranges</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">18</td>
                     <td class="left">accept</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">19</td>
                     <td class="left">access-control-allow-origin</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">20</td>
                     <td class="left">age</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">21</td>
                     <td class="left">allow</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">22</td>
                     <td class="left">authorization</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">23</td>
                     <td class="left">cache-control</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">24</td>
                     <td class="left">content-disposition</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">25</td>
                     <td class="left">content-encoding</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">26</td>
                     <td class="left">content-language</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">27</td>
                     <td class="left">content-length</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">28</td>
                     <td class="left">content-location</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">29</td>
                     <td class="left">content-range</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">30</td>
                     <td class="left">content-type</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">31</td>
                     <td class="left">cookie</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">32</td>
                     <td class="left">date</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">33</td>
                     <td class="left">etag</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">34</td>
                     <td class="left">expect</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">35</td>
                     <td class="left">expires</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">36</td>
                     <td class="left">from</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">37</td>
                     <td class="left">host</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">38</td>
                     <td class="left">if-match</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">39</td>
                     <td class="left">if-modified-since</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">40</td>
                     <td class="left">if-none-match</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">41</td>
                     <td class="left">if-range</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">42</td>
                     <td class="left">if-unmodified-since</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">43</td>
                     <td class="left">last-modified</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">44</td>
                     <td class="left">link</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">45</td>
                     <td class="left">location</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">46</td>
                     <td class="left">max-forwards</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">47</td>
                     <td class="left">proxy-authenticate</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">48</td>
                     <td class="left">proxy-authorization</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">49</td>
                     <td class="left">range</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">50</td>
                     <td class="left">referer</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">51</td>
                     <td class="left">refresh</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">52</td>
                     <td class="left">retry-after</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">53</td>
                     <td class="left">server</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">54</td>
                     <td class="left">set-cookie</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">55</td>
                     <td class="left">strict-transport-security</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">56</td>
                     <td class="left">transfer-encoding</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">57</td>
                     <td class="left">user-agent</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">58</td>
                     <td class="left">vary</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">59</td>
                     <td class="left">via</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">60</td>
                     <td class="left">www-authenticate</td>
                     <td class="left"></td>
                  </tr>
               </tbody>
            </table>
         </div>
         <p id="rfc.section.B.p.4">The table give the index of each entry in the static table. The full index of each entry, to be used for encoding a reference
            to this entry, is computed by adding the number of entries in the header table to this index.
         </p>
      </div>
      <div id="huffman.codes">
         <h1 id="rfc.section.C"><a href="#rfc.section.C">C.</a>&nbsp;<a href="#huffman.codes">Huffman Codes</a></h1>
         <p id="rfc.section.C.p.1">The following codes are used when encoding string literals with an Huffman coding (see <a href="#string.literal.representation" title="String Literal Representation">Section&nbsp;4.1.2</a>).
         </p>
         <p id="rfc.section.C.p.2">Each row in the table specifies one Huffman code: </p>
         <dl>
            <dt>sym:</dt>
            <dd>The symbol to be represented. It is the decimal value of an octet, possibly prepended with its ASCII representation. A specific
               symbol, "EOS", is used to indicate the end of a string literal.
            </dd>
            <dt>code as bits:</dt>
            <dd>The Huffman code for the symbol represented as a base-2 integer.</dd>
            <dt>code as hex:</dt>
            <dd>The Huffman code for the symbol, represented as a hexadecimal integer, aligned on the least significant bit.</dd>
            <dt>len:</dt>
            <dd>The number of bits for the Huffman code of the symbol.</dd>
         </dl>
         <p id="rfc.section.C.p.3">As an example, the Huffman code for the symbol 48 (corresponding to the ASCII character "0") consists in the 5 bits "0", "0",
            "1", "0", "1". This corresponds to the value 5 encoded on 5 bits.
         </p>
         <p id="rfc.section.C.p.4"><span class="comment" id="rfc.comment.2">[<a href="#rfc.comment.2" class="smpl">rfc.comment.2</a>: This table will be regenerated. The example should be updated in accordance to this.]</span> 
         </p>
         <div id="rfc.figure.u.6"></div><pre>                                                       code       
                     code as bits           len       as hex  len 
       sym          aligned to MSB           in       aligned  in 
                                            bits      to LSB  bits
      (  0) |11111111|11111111|11110111|010 [27]      7ffffba [27]
      (  1) |11111111|11111111|11110111|011 [27]      7ffffbb [27]
      (  2) |11111111|11111111|11110111|100 [27]      7ffffbc [27]
      (  3) |11111111|11111111|11110111|101 [27]      7ffffbd [27]
      (  4) |11111111|11111111|11110111|110 [27]      7ffffbe [27]
      (  5) |11111111|11111111|11110111|111 [27]      7ffffbf [27]
      (  6) |11111111|11111111|11111000|000 [27]      7ffffc0 [27]
      (  7) |11111111|11111111|11111000|001 [27]      7ffffc1 [27]
      (  8) |11111111|11111111|11111000|010 [27]      7ffffc2 [27]
      (  9) |11111111|11111111|11111000|011 [27]      7ffffc3 [27]
      ( 10) |11111111|11111111|11111000|100 [27]      7ffffc4 [27]
      ( 11) |11111111|11111111|11111000|101 [27]      7ffffc5 [27]
      ( 12) |11111111|11111111|11111000|110 [27]      7ffffc6 [27]
      ( 13) |11111111|11111111|11111000|111 [27]      7ffffc7 [27]
      ( 14) |11111111|11111111|11111001|000 [27]      7ffffc8 [27]
      ( 15) |11111111|11111111|11111001|001 [27]      7ffffc9 [27]
      ( 16) |11111111|11111111|11111001|010 [27]      7ffffca [27]
      ( 17) |11111111|11111111|11111001|011 [27]      7ffffcb [27]
      ( 18) |11111111|11111111|11111001|100 [27]      7ffffcc [27]
      ( 19) |11111111|11111111|11111001|101 [27]      7ffffcd [27]
      ( 20) |11111111|11111111|11111001|110 [27]      7ffffce [27]
      ( 21) |11111111|11111111|11111001|111 [27]      7ffffcf [27]
      ( 22) |11111111|11111111|11111010|000 [27]      7ffffd0 [27]
      ( 23) |11111111|11111111|11111010|001 [27]      7ffffd1 [27]
      ( 24) |11111111|11111111|11111010|010 [27]      7ffffd2 [27]
      ( 25) |11111111|11111111|11111010|011 [27]      7ffffd3 [27]
      ( 26) |11111111|11111111|11111010|100 [27]      7ffffd4 [27]
      ( 27) |11111111|11111111|11111010|101 [27]      7ffffd5 [27]
      ( 28) |11111111|11111111|11111010|110 [27]      7ffffd6 [27]
      ( 29) |11111111|11111111|11111010|111 [27]      7ffffd7 [27]
      ( 30) |11111111|11111111|11111011|000 [27]      7ffffd8 [27]
      ( 31) |11111111|11111111|11111011|001 [27]      7ffffd9 [27]
  ' ' ( 32) |11101000| [8]                                  e8 [8]
  '!' ( 33) |11111111|1100 [12]                           ffc [12]
  '"' ( 34) |11111111|111010 [14]                        3ffa [14]
  '#' ( 35) |11111111|1111100 [15]                       7ffc [15]
  '$' ( 36) |11111111|1111101 [15]                       7ffd [15]
  '%' ( 37) |100100 [6]                                     24 [6]
  '&amp;' ( 38) |1101110 [7]                                    6e [7]
  ''' ( 39) |11111111|1111110 [15]                       7ffe [15]
  '(' ( 40) |11111111|010 [11]                            7fa [11]
  ')' ( 41) |11111111|011 [11]                            7fb [11]
  '*' ( 42) |11111110|10 [10]                             3fa [10]
  '+' ( 43) |11111111|100 [11]                            7fc [11]
  ',' ( 44) |11101001| [8]                                  e9 [8]
  '-' ( 45) |100101 [6]                                     25 [6]
  '.' ( 46) |00100 [5]                                       4 [5]
  '/' ( 47) |0000 [4]                                        0 [4]
  '0' ( 48) |00101 [5]                                       5 [5]
  '1' ( 49) |00110 [5]                                       6 [5]
  '2' ( 50) |00111 [5]                                       7 [5]
  '3' ( 51) |100110 [6]                                     26 [6]
  '4' ( 52) |100111 [6]                                     27 [6]
  '5' ( 53) |101000 [6]                                     28 [6]
  '6' ( 54) |101001 [6]                                     29 [6]
  '7' ( 55) |101010 [6]                                     2a [6]
  '8' ( 56) |101011 [6]                                     2b [6]
  '9' ( 57) |101100 [6]                                     2c [6]
  ':' ( 58) |11110110|0 [9]                                1ec [9]
  ';' ( 59) |11101010| [8]                                  ea [8]
  '&lt;' ( 60) |11111111|11111111|10 [18]                  3fffe [18]
  '=' ( 61) |101101 [6]                                     2d [6]
  '&gt;' ( 62) |11111111|11111110|0 [17]                   1fffc [17]
  '?' ( 63) |11110110|1 [9]                                1ed [9]
  '@' ( 64) |11111111|111011 [14]                        3ffb [14]
  'A' ( 65) |1101111 [7]                                    6f [7]
  'B' ( 66) |11101011| [8]                                  eb [8]
  'C' ( 67) |11101100| [8]                                  ec [8]
  'D' ( 68) |11101101| [8]                                  ed [8]
  'E' ( 69) |11101110| [8]                                  ee [8]
  'F' ( 70) |1110000 [7]                                    70 [7]
  'G' ( 71) |11110111|0 [9]                                1ee [9]
  'H' ( 72) |11110111|1 [9]                                1ef [9]
  'I' ( 73) |11111000|0 [9]                                1f0 [9]
  'J' ( 74) |11111000|1 [9]                                1f1 [9]
  'K' ( 75) |11111110|11 [10]                             3fb [10]
  'L' ( 76) |11111001|0 [9]                                1f2 [9]
  'M' ( 77) |11101111| [8]                                  ef [8]
  'N' ( 78) |11111001|1 [9]                                1f3 [9]
  'O' ( 79) |11111010|0 [9]                                1f4 [9]
  'P' ( 80) |11111010|1 [9]                                1f5 [9]
  'Q' ( 81) |11111011|0 [9]                                1f6 [9]
  'R' ( 82) |11111011|1 [9]                                1f7 [9]
  'S' ( 83) |11110000| [8]                                  f0 [8]
  'T' ( 84) |11110001| [8]                                  f1 [8]
  'U' ( 85) |11111100|0 [9]                                1f8 [9]
  'V' ( 86) |11111100|1 [9]                                1f9 [9]
  'W' ( 87) |11111101|0 [9]                                1fa [9]
  'X' ( 88) |11111101|1 [9]                                1fb [9]
  'Y' ( 89) |11111110|0 [9]                                1fc [9]
  'Z' ( 90) |11111111|00 [10]                             3fc [10]
  '[' ( 91) |11111111|111100 [14]                        3ffc [14]
  '\' ( 92) |11111111|11111111|11111011|010 [27]      7ffffda [27]
  ']' ( 93) |11111111|11100 [13]                         1ffc [13]
  '^' ( 94) |11111111|111101 [14]                        3ffd [14]
  '_' ( 95) |101110 [6]                                     2e [6]
  '`' ( 96) |11111111|11111111|110 [19]                 7fffe [19]
  'a' ( 97) |01000 [5]                                       8 [5]
  'b' ( 98) |101111 [6]                                     2f [6]
  'c' ( 99) |01001 [5]                                       9 [5]
  'd' (100) |110000 [6]                                     30 [6]
  'e' (101) |0001 [4]                                        1 [4]
  'f' (102) |110001 [6]                                     31 [6]
  'g' (103) |110010 [6]                                     32 [6]
  'h' (104) |110011 [6]                                     33 [6]
  'i' (105) |01010 [5]                                       a [5]
  'j' (106) |1110001 [7]                                    71 [7]
  'k' (107) |1110010 [7]                                    72 [7]
  'l' (108) |01011 [5]                                       b [5]
  'm' (109) |110100 [6]                                     34 [6]
  'n' (110) |01100 [5]                                       c [5]
  'o' (111) |01101 [5]                                       d [5]
  'p' (112) |01110 [5]                                       e [5]
  'q' (113) |11110010| [8]                                  f2 [8]
  'r' (114) |01111 [5]                                       f [5]
  's' (115) |10000 [5]                                      10 [5]
  't' (116) |10001 [5]                                      11 [5]
  'u' (117) |110101 [6]                                     35 [6]
  'v' (118) |1110011 [7]                                    73 [7]
  'w' (119) |110110 [6]                                     36 [6]
  'x' (120) |11110011| [8]                                  f3 [8]
  'y' (121) |11110100| [8]                                  f4 [8]
  'z' (122) |11110101| [8]                                  f5 [8]
  '{' (123) |11111111|11111110|1 [17]                   1fffd [17]
  '|' (124) |11111111|101 [11]                            7fd [11]
  '}' (125) |11111111|11111111|0 [17]                   1fffe [17]
  '~' (126) |11111111|1101 [12]                           ffd [12]
      (127) |11111111|11111111|11111011|011 [27]      7ffffdb [27]
      (128) |11111111|11111111|11111011|100 [27]      7ffffdc [27]
      (129) |11111111|11111111|11111011|101 [27]      7ffffdd [27]
      (130) |11111111|11111111|11111011|110 [27]      7ffffde [27]
      (131) |11111111|11111111|11111011|111 [27]      7ffffdf [27]
      (132) |11111111|11111111|11111100|000 [27]      7ffffe0 [27]
      (133) |11111111|11111111|11111100|001 [27]      7ffffe1 [27]
      (134) |11111111|11111111|11111100|010 [27]      7ffffe2 [27]
      (135) |11111111|11111111|11111100|011 [27]      7ffffe3 [27]
      (136) |11111111|11111111|11111100|100 [27]      7ffffe4 [27]
      (137) |11111111|11111111|11111100|101 [27]      7ffffe5 [27]
      (138) |11111111|11111111|11111100|110 [27]      7ffffe6 [27]
      (139) |11111111|11111111|11111100|111 [27]      7ffffe7 [27]
      (140) |11111111|11111111|11111101|000 [27]      7ffffe8 [27]
      (141) |11111111|11111111|11111101|001 [27]      7ffffe9 [27]
      (142) |11111111|11111111|11111101|010 [27]      7ffffea [27]
      (143) |11111111|11111111|11111101|011 [27]      7ffffeb [27]
      (144) |11111111|11111111|11111101|100 [27]      7ffffec [27]
      (145) |11111111|11111111|11111101|101 [27]      7ffffed [27]
      (146) |11111111|11111111|11111101|110 [27]      7ffffee [27]
      (147) |11111111|11111111|11111101|111 [27]      7ffffef [27]
      (148) |11111111|11111111|11111110|000 [27]      7fffff0 [27]
      (149) |11111111|11111111|11111110|001 [27]      7fffff1 [27]
      (150) |11111111|11111111|11111110|010 [27]      7fffff2 [27]
      (151) |11111111|11111111|11111110|011 [27]      7fffff3 [27]
      (152) |11111111|11111111|11111110|100 [27]      7fffff4 [27]
      (153) |11111111|11111111|11111110|101 [27]      7fffff5 [27]
      (154) |11111111|11111111|11111110|110 [27]      7fffff6 [27]
      (155) |11111111|11111111|11111110|111 [27]      7fffff7 [27]
      (156) |11111111|11111111|11111111|000 [27]      7fffff8 [27]
      (157) |11111111|11111111|11111111|001 [27]      7fffff9 [27]
      (158) |11111111|11111111|11111111|010 [27]      7fffffa [27]
      (159) |11111111|11111111|11111111|011 [27]      7fffffb [27]
      (160) |11111111|11111111|11111111|100 [27]      7fffffc [27]
      (161) |11111111|11111111|11111111|101 [27]      7fffffd [27]
      (162) |11111111|11111111|11111111|110 [27]      7fffffe [27]
      (163) |11111111|11111111|11111111|111 [27]      7ffffff [27]
      (164) |11111111|11111111|11100000|00 [26]       3ffff80 [26]
      (165) |11111111|11111111|11100000|01 [26]       3ffff81 [26]
      (166) |11111111|11111111|11100000|10 [26]       3ffff82 [26]
      (167) |11111111|11111111|11100000|11 [26]       3ffff83 [26]
      (168) |11111111|11111111|11100001|00 [26]       3ffff84 [26]
      (169) |11111111|11111111|11100001|01 [26]       3ffff85 [26]
      (170) |11111111|11111111|11100001|10 [26]       3ffff86 [26]
      (171) |11111111|11111111|11100001|11 [26]       3ffff87 [26]
      (172) |11111111|11111111|11100010|00 [26]       3ffff88 [26]
      (173) |11111111|11111111|11100010|01 [26]       3ffff89 [26]
      (174) |11111111|11111111|11100010|10 [26]       3ffff8a [26]
      (175) |11111111|11111111|11100010|11 [26]       3ffff8b [26]
      (176) |11111111|11111111|11100011|00 [26]       3ffff8c [26]
      (177) |11111111|11111111|11100011|01 [26]       3ffff8d [26]
      (178) |11111111|11111111|11100011|10 [26]       3ffff8e [26]
      (179) |11111111|11111111|11100011|11 [26]       3ffff8f [26]
      (180) |11111111|11111111|11100100|00 [26]       3ffff90 [26]
      (181) |11111111|11111111|11100100|01 [26]       3ffff91 [26]
      (182) |11111111|11111111|11100100|10 [26]       3ffff92 [26]
      (183) |11111111|11111111|11100100|11 [26]       3ffff93 [26]
      (184) |11111111|11111111|11100101|00 [26]       3ffff94 [26]
      (185) |11111111|11111111|11100101|01 [26]       3ffff95 [26]
      (186) |11111111|11111111|11100101|10 [26]       3ffff96 [26]
      (187) |11111111|11111111|11100101|11 [26]       3ffff97 [26]
      (188) |11111111|11111111|11100110|00 [26]       3ffff98 [26]
      (189) |11111111|11111111|11100110|01 [26]       3ffff99 [26]
      (190) |11111111|11111111|11100110|10 [26]       3ffff9a [26]
      (191) |11111111|11111111|11100110|11 [26]       3ffff9b [26]
      (192) |11111111|11111111|11100111|00 [26]       3ffff9c [26]
      (193) |11111111|11111111|11100111|01 [26]       3ffff9d [26]
      (194) |11111111|11111111|11100111|10 [26]       3ffff9e [26]
      (195) |11111111|11111111|11100111|11 [26]       3ffff9f [26]
      (196) |11111111|11111111|11101000|00 [26]       3ffffa0 [26]
      (197) |11111111|11111111|11101000|01 [26]       3ffffa1 [26]
      (198) |11111111|11111111|11101000|10 [26]       3ffffa2 [26]
      (199) |11111111|11111111|11101000|11 [26]       3ffffa3 [26]
      (200) |11111111|11111111|11101001|00 [26]       3ffffa4 [26]
      (201) |11111111|11111111|11101001|01 [26]       3ffffa5 [26]
      (202) |11111111|11111111|11101001|10 [26]       3ffffa6 [26]
      (203) |11111111|11111111|11101001|11 [26]       3ffffa7 [26]
      (204) |11111111|11111111|11101010|00 [26]       3ffffa8 [26]
      (205) |11111111|11111111|11101010|01 [26]       3ffffa9 [26]
      (206) |11111111|11111111|11101010|10 [26]       3ffffaa [26]
      (207) |11111111|11111111|11101010|11 [26]       3ffffab [26]
      (208) |11111111|11111111|11101011|00 [26]       3ffffac [26]
      (209) |11111111|11111111|11101011|01 [26]       3ffffad [26]
      (210) |11111111|11111111|11101011|10 [26]       3ffffae [26]
      (211) |11111111|11111111|11101011|11 [26]       3ffffaf [26]
      (212) |11111111|11111111|11101100|00 [26]       3ffffb0 [26]
      (213) |11111111|11111111|11101100|01 [26]       3ffffb1 [26]
      (214) |11111111|11111111|11101100|10 [26]       3ffffb2 [26]
      (215) |11111111|11111111|11101100|11 [26]       3ffffb3 [26]
      (216) |11111111|11111111|11101101|00 [26]       3ffffb4 [26]
      (217) |11111111|11111111|11101101|01 [26]       3ffffb5 [26]
      (218) |11111111|11111111|11101101|10 [26]       3ffffb6 [26]
      (219) |11111111|11111111|11101101|11 [26]       3ffffb7 [26]
      (220) |11111111|11111111|11101110|00 [26]       3ffffb8 [26]
      (221) |11111111|11111111|11101110|01 [26]       3ffffb9 [26]
      (222) |11111111|11111111|11101110|10 [26]       3ffffba [26]
      (223) |11111111|11111111|11101110|11 [26]       3ffffbb [26]
      (224) |11111111|11111111|11101111|00 [26]       3ffffbc [26]
      (225) |11111111|11111111|11101111|01 [26]       3ffffbd [26]
      (226) |11111111|11111111|11101111|10 [26]       3ffffbe [26]
      (227) |11111111|11111111|11101111|11 [26]       3ffffbf [26]
      (228) |11111111|11111111|11110000|00 [26]       3ffffc0 [26]
      (229) |11111111|11111111|11110000|01 [26]       3ffffc1 [26]
      (230) |11111111|11111111|11110000|10 [26]       3ffffc2 [26]
      (231) |11111111|11111111|11110000|11 [26]       3ffffc3 [26]
      (232) |11111111|11111111|11110001|00 [26]       3ffffc4 [26]
      (233) |11111111|11111111|11110001|01 [26]       3ffffc5 [26]
      (234) |11111111|11111111|11110001|10 [26]       3ffffc6 [26]
      (235) |11111111|11111111|11110001|11 [26]       3ffffc7 [26]
      (236) |11111111|11111111|11110010|00 [26]       3ffffc8 [26]
      (237) |11111111|11111111|11110010|01 [26]       3ffffc9 [26]
      (238) |11111111|11111111|11110010|10 [26]       3ffffca [26]
      (239) |11111111|11111111|11110010|11 [26]       3ffffcb [26]
      (240) |11111111|11111111|11110011|00 [26]       3ffffcc [26]
      (241) |11111111|11111111|11110011|01 [26]       3ffffcd [26]
      (242) |11111111|11111111|11110011|10 [26]       3ffffce [26]
      (243) |11111111|11111111|11110011|11 [26]       3ffffcf [26]
      (244) |11111111|11111111|11110100|00 [26]       3ffffd0 [26]
      (245) |11111111|11111111|11110100|01 [26]       3ffffd1 [26]
      (246) |11111111|11111111|11110100|10 [26]       3ffffd2 [26]
      (247) |11111111|11111111|11110100|11 [26]       3ffffd3 [26]
      (248) |11111111|11111111|11110101|00 [26]       3ffffd4 [26]
      (249) |11111111|11111111|11110101|01 [26]       3ffffd5 [26]
      (250) |11111111|11111111|11110101|10 [26]       3ffffd6 [26]
      (251) |11111111|11111111|11110101|11 [26]       3ffffd7 [26]
      (252) |11111111|11111111|11110110|00 [26]       3ffffd8 [26]
      (253) |11111111|11111111|11110110|01 [26]       3ffffd9 [26]
      (254) |11111111|11111111|11110110|10 [26]       3ffffda [26]
      (255) |11111111|11111111|11110110|11 [26]       3ffffdb [26]
  EOS (256) |11111111|11111111|11110111|00 [26]       3ffffdc [26]</pre></div>
      <div id="examples">
         <h1 id="rfc.section.D"><a href="#rfc.section.D">D.</a>&nbsp;<a href="#examples">Examples</a></h1>
         <p id="rfc.section.D.p.1">A number of examples are worked through here, for both requests and responses, and with and without Huffman coding.</p>
         <div id="header.field.representation.examples">
            <h2 id="rfc.section.D.1"><a href="#rfc.section.D.1">D.1</a>&nbsp;<a href="#header.field.representation.examples">Header Field Representation Examples</a></h2>
            <p id="rfc.section.D.1.p.1">This section show several independent representation examples.</p>
            <div>
               <h3 id="rfc.section.D.1.1"><a href="#rfc.section.D.1.1">D.1.1</a>&nbsp;Literal Header Field with Indexing
               </h3>
               <p id="rfc.section.D.1.1.p.1">The header field representation uses a literal name and a literal value.</p>
               <p id="rfc.section.D.1.1.p.2"></p>
               <div id="rfc.figure.u.7"></div>
               <p>Header set to encode:</p><pre>custom-key: custom-header</pre><p id="rfc.section.D.1.1.p.3">Reference set: empty.</p>
               <p id="rfc.section.D.1.1.p.4"></p>
               <div id="rfc.figure.u.8"></div>
               <p>Hex dump of encoded data:</p><pre>000a 6375 7374 6f6d 2d6b 6579 0d63 7573 | ..custom-key.cus
746f 6d2d 6865 6164 6572                | tom-header</pre><p id="rfc.section.D.1.1.p.5"></p>
               <div id="rfc.figure.u.9"></div>
               <p>Decoding process:</p><pre>00                                      | == Literal indexed ==
0a                                      |   Literal name (len = 10)
6375 7374 6f6d 2d6b 6579                | custom-key
0d                                      |   Literal value (len = 13)
6375 7374 6f6d 2d68 6561 6465 72        | custom-header
                                        | -&gt; custom-key: custom-head\
                                        |   er</pre><p id="rfc.section.D.1.1.p.6"></p>
               <div id="rfc.figure.u.10"></div>
               <p>Header Table (after decoding):</p><pre>[  1] (s =  55) custom-key: custom-header
      Table size:  55</pre><p id="rfc.section.D.1.1.p.7"></p>
               <div id="rfc.figure.u.11"></div>
               <p>Decoded header set:</p><pre>custom-key: custom-header</pre></div>
            <div>
               <h3 id="rfc.section.D.1.2"><a href="#rfc.section.D.1.2">D.1.2</a>&nbsp;Literal Header Field without Indexing
               </h3>
               <p id="rfc.section.D.1.2.p.1">The header field representation uses an indexed name and a literal value.</p>
               <p id="rfc.section.D.1.2.p.2"></p>
               <div id="rfc.figure.u.12"></div>
               <p>Header set to encode:</p><pre>:path: /sample/path</pre><p id="rfc.section.D.1.2.p.3">Reference set: empty.</p>
               <p id="rfc.section.D.1.2.p.4"></p>
               <div id="rfc.figure.u.13"></div>
               <p>Hex dump of encoded data:</p><pre>440c 2f73 616d 706c 652f 7061 7468      | D./sample/path</pre><p id="rfc.section.D.1.2.p.5"></p>
               <div id="rfc.figure.u.14"></div>
               <p>Decoding process:</p><pre>44                                      | == Literal not indexed ==
                                        |   Indexed name (idx = 4)
                                        |     :path
0c                                      |   Literal value (len = 12)
2f73 616d 706c 652f 7061 7468           | /sample/path
                                        | -&gt; :path: /sample/path</pre><p id="rfc.section.D.1.2.p.6">Header table (after decoding): empty.</p>
               <p id="rfc.section.D.1.2.p.7"></p>
               <div id="rfc.figure.u.15"></div>
               <p>Decoded header set:</p><pre>:path: /sample/path</pre></div>
            <div>
               <h3 id="rfc.section.D.1.3"><a href="#rfc.section.D.1.3">D.1.3</a>&nbsp;Indexed Header Field
               </h3>
               <p id="rfc.section.D.1.3.p.1">The header field representation uses an indexed header field, from the static table. Upon using it, the static table entry
                  is copied into the header table.
               </p>
               <p id="rfc.section.D.1.3.p.2"></p>
               <div id="rfc.figure.u.16"></div>
               <p>Header set to encode:</p><pre>:method: GET</pre><p id="rfc.section.D.1.3.p.3">Reference set: empty.</p>
               <p id="rfc.section.D.1.3.p.4"></p>
               <div id="rfc.figure.u.17"></div>
               <p>Hex dump of encoded data:</p><pre>82                                      | .</pre><p id="rfc.section.D.1.3.p.5"></p>
               <div id="rfc.figure.u.18"></div>
               <p>Decoding process:</p><pre>82                                      | == Indexed - Add ==
                                        |   idx = 2
                                        | -&gt; :method: GET</pre><p id="rfc.section.D.1.3.p.6"></p>
               <div id="rfc.figure.u.19"></div>
               <p>Header Table (after decoding):</p><pre>[  1] (s =  42) :method: GET
      Table size:  42</pre><p id="rfc.section.D.1.3.p.7"></p>
               <div id="rfc.figure.u.20"></div>
               <p>Decoded header set:</p><pre>:method: GET</pre></div>
            <div>
               <h3 id="rfc.section.D.1.4"><a href="#rfc.section.D.1.4">D.1.4</a>&nbsp;Indexed Header Field from Static Table
               </h3>
               <p id="rfc.section.D.1.4.p.1">The header field representation uses an indexed header field, from the static table. In this example, the SETTINGS_HEADER_TABLE_SIZE
                  is set to 0, therefore, the entry is not copied into the header table.
               </p>
               <p id="rfc.section.D.1.4.p.2"></p>
               <div id="rfc.figure.u.21"></div>
               <p>Header set to encode:</p><pre>:method: GET</pre><p id="rfc.section.D.1.4.p.3">Reference set: empty.</p>
               <p id="rfc.section.D.1.4.p.4"></p>
               <div id="rfc.figure.u.22"></div>
               <p>Hex dump of encoded data:</p><pre>82                                      | .</pre><p id="rfc.section.D.1.4.p.5"></p>
               <div id="rfc.figure.u.23"></div>
               <p>Decoding process:</p><pre>82                                      | == Indexed - Add ==
                                        |   idx = 2
                                        | -&gt; :method: GET</pre><p id="rfc.section.D.1.4.p.6">Header table (after decoding): empty.</p>
               <p id="rfc.section.D.1.4.p.7"></p>
               <div id="rfc.figure.u.24"></div>
               <p>Decoded header set:</p><pre>:method: GET</pre></div>
         </div>
         <div id="request.examples.without.huffman">
            <h2 id="rfc.section.D.2"><a href="#rfc.section.D.2">D.2</a>&nbsp;<a href="#request.examples.without.huffman">Request Examples without Huffman</a></h2>
            <p id="rfc.section.D.2.p.1">This section shows several consecutive header sets, corresponding to HTTP requests, on the same connection.</p>
            <div>
               <h3 id="rfc.section.D.2.1"><a href="#rfc.section.D.2.1">D.2.1</a>&nbsp;First request
               </h3>
               <p id="rfc.section.D.2.1.p.1"></p>
               <div id="rfc.figure.u.25"></div>
               <p>Header set to encode:</p><pre>:method: GET
:scheme: http
:path: /
:authority: www.example.com</pre><p id="rfc.section.D.2.1.p.2">Reference set: empty.</p>
               <p id="rfc.section.D.2.1.p.3"></p>
               <div id="rfc.figure.u.26"></div>
               <p>Hex dump of encoded data:</p><pre>8287 8604 0f77 7777 2e65 7861 6d70 6c65 | .....www.example
2e63 6f6d                               | .com</pre><p id="rfc.section.D.2.1.p.4"></p>
               <div id="rfc.figure.u.27"></div>
               <p>Decoding process:</p><pre>82                                      | == Indexed - Add ==
                                        |   idx = 2
                                        | -&gt; :method: GET
87                                      | == Indexed - Add ==
                                        |   idx = 7
                                        | -&gt; :scheme: http
86                                      | == Indexed - Add ==
                                        |   idx = 6
                                        | -&gt; :path: /
04                                      | == Literal indexed ==
                                        |   Indexed name (idx = 4)
                                        |     :authority
0f                                      |   Literal value (len = 15)
7777 772e 6578 616d 706c 652e 636f 6d   | www.example.com
                                        | -&gt; :authority: www.example\
                                        |   .com</pre><p id="rfc.section.D.2.1.p.5"></p>
               <div id="rfc.figure.u.28"></div>
               <p>Header Table (after decoding):</p><pre>[  1] (s =  57) :authority: www.example.com
[  2] (s =  38) :path: /
[  3] (s =  43) :scheme: http
[  4] (s =  42) :method: GET
      Table size: 180</pre><p id="rfc.section.D.2.1.p.6"></p>
               <div id="rfc.figure.u.29"></div>
               <p>Decoded header set:</p><pre>:method: GET
:scheme: http
:path: /
:authority: www.example.com</pre></div>
            <div>
               <h3 id="rfc.section.D.2.2"><a href="#rfc.section.D.2.2">D.2.2</a>&nbsp;Second request
               </h3>
               <p id="rfc.section.D.2.2.p.1">This request takes advantage of the differential encoding of header sets.</p>
               <p id="rfc.section.D.2.2.p.2"></p>
               <div id="rfc.figure.u.30"></div>
               <p>Header set to encode:</p><pre>:method: GET
:scheme: http
:path: /
:authority: www.example.com
cache-control: no-cache</pre><p id="rfc.section.D.2.2.p.3"></p>
               <div id="rfc.figure.u.31"></div>
               <p>Reference set:</p><pre>[  1] :authority: www.example.com
[  2] :path: /
[  3] :scheme: http
[  4] :method: GET</pre><p id="rfc.section.D.2.2.p.4"></p>
               <div id="rfc.figure.u.32"></div>
               <p>Hex dump of encoded data:</p><pre>1b08 6e6f 2d63 6163 6865                | ..no-cache</pre><p id="rfc.section.D.2.2.p.5"></p>
               <div id="rfc.figure.u.33"></div>
               <p>Decoding process:</p><pre>1b                                      | == Literal indexed ==
                                        |   Indexed name (idx = 27)
                                        |     cache-control
08                                      |   Literal value (len = 8)
6e6f 2d63 6163 6865                     | no-cache
                                        | -&gt; cache-control: no-cache</pre><p id="rfc.section.D.2.2.p.6"></p>
               <div id="rfc.figure.u.34"></div>
               <p>Header Table (after decoding):</p><pre>[  1] (s =  53) cache-control: no-cache
[  2] (s =  57) :authority: www.example.com
[  3] (s =  38) :path: /
[  4] (s =  43) :scheme: http
[  5] (s =  42) :method: GET
      Table size: 233</pre><p id="rfc.section.D.2.2.p.7"></p>
               <div id="rfc.figure.u.35"></div>
               <p>Decoded header set:</p><pre>cache-control: no-cache
:authority: www.example.com
:path: /
:scheme: http
:method: GET</pre></div>
            <div>
               <h3 id="rfc.section.D.2.3"><a href="#rfc.section.D.2.3">D.2.3</a>&nbsp;Third request
               </h3>
               <p id="rfc.section.D.2.3.p.1">This request has not enough headers in common with the previous request to take advantage of the differential encoding. Therefore,
                  the reference set is emptied before encoding the header fields.
               </p>
               <p id="rfc.section.D.2.3.p.2"></p>
               <div id="rfc.figure.u.36"></div>
               <p>Header set to encode:</p><pre>:method: GET
:scheme: https
:path: /index.html
:authority: www.example.com
custom-key: custom-value</pre><p id="rfc.section.D.2.3.p.3"></p>
               <div id="rfc.figure.u.37"></div>
               <p>Reference set:</p><pre>[  1] cache-control: no-cache
[  2] :authority: www.example.com
[  3] :path: /
[  4] :scheme: http
[  5] :method: GET</pre><p id="rfc.section.D.2.3.p.4"></p>
               <div id="rfc.figure.u.38"></div>
               <p>Hex dump of encoded data:</p><pre>8080 858c 8b84 000a 6375 7374 6f6d 2d6b | ........custom-k
6579 0c63 7573 746f 6d2d 7661 6c75 65   | ey.custom-value</pre><p id="rfc.section.D.2.3.p.5"></p>
               <div id="rfc.figure.u.39"></div>
               <p>Decoding process:</p><pre>80 80                                   | == Empty reference set ==
                                        |   idx = 0
                                        |   flag = 1
85                                      | == Indexed - Add ==
                                        |   idx = 5
                                        | -&gt; :method: GET
8c                                      | == Indexed - Add ==
                                        |   idx = 12
                                        | -&gt; :scheme: https
8b                                      | == Indexed - Add ==
                                        |   idx = 11
                                        | -&gt; :path: /index.html
84                                      | == Indexed - Add ==
                                        |   idx = 4
                                        | -&gt; :authority: www.example\
                                        |   .com
00                                      | == Literal indexed ==
0a                                      |   Literal name (len = 10)
6375 7374 6f6d 2d6b 6579                | custom-key
0c                                      |   Literal value (len = 12)
6375 7374 6f6d 2d76 616c 7565           | custom-value
                                        | -&gt; custom-key: custom-valu\
                                        |   e</pre><p id="rfc.section.D.2.3.p.6"></p>
               <div id="rfc.figure.u.40"></div>
               <p>Header Table (after decoding):</p><pre>[  1] (s =  54) custom-key: custom-value
[  2] (s =  48) :path: /index.html
[  3] (s =  44) :scheme: https
[  4] (s =  53) cache-control: no-cache
[  5] (s =  57) :authority: www.example.com
[  6] (s =  38) :path: /
[  7] (s =  43) :scheme: http
[  8] (s =  42) :method: GET
      Table size: 379</pre><p id="rfc.section.D.2.3.p.7"></p>
               <div id="rfc.figure.u.41"></div>
               <p>Decoded header set:</p><pre>:method: GET
:scheme: https
:path: /index.html
:authority: www.example.com
custom-key: custom-value</pre></div>
         </div>
         <div id="request.examples.with.huffman">
            <h2 id="rfc.section.D.3"><a href="#rfc.section.D.3">D.3</a>&nbsp;<a href="#request.examples.with.huffman">Request Examples with Huffman</a></h2>
            <p id="rfc.section.D.3.p.1">This section shows the same examples as the previous section, but using Huffman encoding for the literal values.</p>
            <div>
               <h3 id="rfc.section.D.3.1"><a href="#rfc.section.D.3.1">D.3.1</a>&nbsp;First request
               </h3>
               <p id="rfc.section.D.3.1.p.1"></p>
               <div id="rfc.figure.u.42"></div>
               <p>Header set to encode:</p><pre>:method: GET
:scheme: http
:path: /
:authority: www.example.com</pre><p id="rfc.section.D.3.1.p.2">Reference set: empty.</p>
               <p id="rfc.section.D.3.1.p.3"></p>
               <div id="rfc.figure.u.43"></div>
               <p>Hex dump of encoded data:</p><pre>8287 8604 8bdb 6d88 3e68 d1cb 1225 ba7f | ......m..h...%..</pre><p id="rfc.section.D.3.1.p.4"></p>
               <div id="rfc.figure.u.44"></div>
               <p>Decoding process:</p><pre>82                                      | == Indexed - Add ==
                                        |   idx = 2
                                        | -&gt; :method: GET
87                                      | == Indexed - Add ==
                                        |   idx = 7
                                        | -&gt; :scheme: http
86                                      | == Indexed - Add ==
                                        |   idx = 6
                                        | -&gt; :path: /
04                                      | == Literal indexed ==
                                        |   Indexed name (idx = 4)
                                        |     :authority
8b                                      |   Literal value (len = 15)
                                        |     Huffman encoded:
db6d 883e 68d1 cb12 25ba 7f             | .m..h...%..
                                        |     Decoded:
                                        | www.example.com
                                        | -&gt; :authority: www.example\
                                        |   .com</pre><p id="rfc.section.D.3.1.p.5"></p>
               <div id="rfc.figure.u.45"></div>
               <p>Header Table (after decoding):</p><pre>[  1] (s =  57) :authority: www.example.com
[  2] (s =  38) :path: /
[  3] (s =  43) :scheme: http
[  4] (s =  42) :method: GET
      Table size: 180</pre><p id="rfc.section.D.3.1.p.6"></p>
               <div id="rfc.figure.u.46"></div>
               <p>Decoded header set:</p><pre>:method: GET
:scheme: http
:path: /
:authority: www.example.com</pre></div>
            <div>
               <h3 id="rfc.section.D.3.2"><a href="#rfc.section.D.3.2">D.3.2</a>&nbsp;Second request
               </h3>
               <p id="rfc.section.D.3.2.p.1">This request takes advantage of the differential encoding of header sets.</p>
               <p id="rfc.section.D.3.2.p.2"></p>
               <div id="rfc.figure.u.47"></div>
               <p>Header set to encode:</p><pre>:method: GET
:scheme: http
:path: /
:authority: www.example.com
cache-control: no-cache</pre><p id="rfc.section.D.3.2.p.3"></p>
               <div id="rfc.figure.u.48"></div>
               <p>Reference set:</p><pre>[  1] :authority: www.example.com
[  2] :path: /
[  3] :scheme: http
[  4] :method: GET</pre><p id="rfc.section.D.3.2.p.4"></p>
               <div id="rfc.figure.u.49"></div>
               <p>Hex dump of encoded data:</p><pre>1b86 6365 4a13 98ff                     | ..ceJ...</pre><p id="rfc.section.D.3.2.p.5"></p>
               <div id="rfc.figure.u.50"></div>
               <p>Decoding process:</p><pre>1b                                      | == Literal indexed ==
                                        |   Indexed name (idx = 27)
                                        |     cache-control
86                                      |   Literal value (len = 8)
                                        |     Huffman encoded:
6365 4a13 98ff                          | ceJ...
                                        |     Decoded:
                                        | no-cache
                                        | -&gt; cache-control: no-cache</pre><p id="rfc.section.D.3.2.p.6"></p>
               <div id="rfc.figure.u.51"></div>
               <p>Header Table (after decoding):</p><pre>[  1] (s =  53) cache-control: no-cache
[  2] (s =  57) :authority: www.example.com
[  3] (s =  38) :path: /
[  4] (s =  43) :scheme: http
[  5] (s =  42) :method: GET
      Table size: 233</pre><p id="rfc.section.D.3.2.p.7"></p>
               <div id="rfc.figure.u.52"></div>
               <p>Decoded header set:</p><pre>cache-control: no-cache
:authority: www.example.com
:path: /
:scheme: http
:method: GET</pre></div>
            <div>
               <h3 id="rfc.section.D.3.3"><a href="#rfc.section.D.3.3">D.3.3</a>&nbsp;Third request
               </h3>
               <p id="rfc.section.D.3.3.p.1">This request has not enough headers in common with the previous request to take advantage of the differential encoding. Therefore,
                  the reference set is emptied before encoding the header fields.
               </p>
               <p id="rfc.section.D.3.3.p.2"></p>
               <div id="rfc.figure.u.53"></div>
               <p>Header set to encode:</p><pre>:method: GET
:scheme: https
:path: /index.html
:authority: www.example.com
custom-key: custom-value</pre><p id="rfc.section.D.3.3.p.3"></p>
               <div id="rfc.figure.u.54"></div>
               <p>Reference set:</p><pre>[  1] cache-control: no-cache
[  2] :authority: www.example.com
[  3] :path: /
[  4] :scheme: http
[  5] :method: GET</pre><p id="rfc.section.D.3.3.p.4"></p>
               <div id="rfc.figure.u.55"></div>
               <p>Hex dump of encoded data:</p><pre>8080 858c 8b84 0088 4eb0 8b74 9790 fa7f | ........N..t....
894e b08b 7497 9a17 a8ff                | .N..t.....</pre><p id="rfc.section.D.3.3.p.5"></p>
               <div id="rfc.figure.u.56"></div>
               <p>Decoding process:</p><pre>80 80                                   | == Empty reference set ==
                                        |   idx = 0
                                        |   flag = 1
85                                      | == Indexed - Add ==
                                        |   idx = 5
                                        | -&gt; :method: GET
8c                                      | == Indexed - Add ==
                                        |   idx = 12
                                        | -&gt; :scheme: https
8b                                      | == Indexed - Add ==
                                        |   idx = 11
                                        | -&gt; :path: /index.html
84                                      | == Indexed - Add ==
                                        |   idx = 4
                                        | -&gt; :authority: www.example\
                                        |   .com
00                                      | == Literal indexed ==
88                                      |   Literal name (len = 10)
                                        |     Huffman encoded:
4eb0 8b74 9790 fa7f                     | N..t....
                                        |     Decoded:
                                        | custom-key
89                                      |   Literal value (len = 12)
                                        |     Huffman encoded:
4eb0 8b74 979a 17a8 ff                  | N..t.....
                                        |     Decoded:
                                        | custom-value
                                        | -&gt; custom-key: custom-valu\
                                        |   e</pre><p id="rfc.section.D.3.3.p.6"></p>
               <div id="rfc.figure.u.57"></div>
               <p>Header Table (after decoding):</p><pre>[  1] (s =  54) custom-key: custom-value
[  2] (s =  48) :path: /index.html
[  3] (s =  44) :scheme: https
[  4] (s =  53) cache-control: no-cache
[  5] (s =  57) :authority: www.example.com
[  6] (s =  38) :path: /
[  7] (s =  43) :scheme: http
[  8] (s =  42) :method: GET
      Table size: 379</pre><p id="rfc.section.D.3.3.p.7"></p>
               <div id="rfc.figure.u.58"></div>
               <p>Decoded header set:</p><pre>:method: GET
:scheme: https
:path: /index.html
:authority: www.example.com
custom-key: custom-value</pre></div>
         </div>
         <div id="response.examples.without.huffman">
            <h2 id="rfc.section.D.4"><a href="#rfc.section.D.4">D.4</a>&nbsp;<a href="#response.examples.without.huffman">Response Examples without Huffman</a></h2>
            <p id="rfc.section.D.4.p.1">This section shows several consecutive header sets, corresponding to HTTP responses, on the same connection. SETTINGS_HEADER_TABLE_SIZE
               is set to the value of 256 octets, causing some evictions to occur.
            </p>
            <div>
               <h3 id="rfc.section.D.4.1"><a href="#rfc.section.D.4.1">D.4.1</a>&nbsp;First response
               </h3>
               <p id="rfc.section.D.4.1.p.1"></p>
               <div id="rfc.figure.u.59"></div>
               <p>Header set to encode:</p><pre>:status: 302
cache-control: private
date: Mon, 21 Oct 2013 20:13:21 GMT
location: https://www.example.com</pre><p id="rfc.section.D.4.1.p.2">Reference set: empty.</p>
               <p id="rfc.section.D.4.1.p.3"></p>
               <div id="rfc.figure.u.60"></div>
               <p>Hex dump of encoded data:</p><pre>0803 3330 3218 0770 7269 7661 7465 221d | ..302..private".
4d6f 6e2c 2032 3120 4f63 7420 3230 3133 | Mon, 21 Oct 2013
2032 303a 3133 3a32 3120 474d 5430 1768 |  20:13:21 GMT0.h
7474 7073 3a2f 2f77 7777 2e65 7861 6d70 | ttps://www.examp
6c65 2e63 6f6d                          | le.com</pre><p id="rfc.section.D.4.1.p.4"></p>
               <div id="rfc.figure.u.61"></div>
               <p>Decoding process:</p><pre>08                                      | == Literal indexed ==
                                        |   Indexed name (idx = 8)
                                        |     :status
03                                      |   Literal value (len = 3)
3330 32                                 | 302
                                        | -&gt; :status: 302
18                                      | == Literal indexed ==
                                        |   Indexed name (idx = 24)
                                        |     cache-control
07                                      |   Literal value (len = 7)
7072 6976 6174 65                       | private
                                        | -&gt; cache-control: private
22                                      | == Literal indexed ==
                                        |   Indexed name (idx = 34)
                                        |     date
1d                                      |   Literal value (len = 29)
4d6f 6e2c 2032 3120 4f63 7420 3230 3133 | Mon, 21 Oct 2013
2032 303a 3133 3a32 3120 474d 54        |  20:13:21 GMT
                                        | -&gt; date: Mon, 21 Oct 2013 \
                                        |   20:13:21 GMT
30                                      | == Literal indexed ==
                                        |   Indexed name (idx = 48)
                                        |     location
17                                      |   Literal value (len = 23)
6874 7470 733a 2f2f 7777 772e 6578 616d | https://www.exam
706c 652e 636f 6d                       | ple.com
                                        | -&gt; location: https://www.e\
                                        |   xample.com</pre><p id="rfc.section.D.4.1.p.5"></p>
               <div id="rfc.figure.u.62"></div>
               <p>Header Table (after decoding):</p><pre>[  1] (s =  63) location: https://www.example.com
[  2] (s =  65) date: Mon, 21 Oct 2013 20:13:21 GMT
[  3] (s =  52) cache-control: private
[  4] (s =  42) :status: 302
      Table size: 222</pre><p id="rfc.section.D.4.1.p.6"></p>
               <div id="rfc.figure.u.63"></div>
               <p>Decoded header set:</p><pre>:status: 302
cache-control: private
date: Mon, 21 Oct 2013 20:13:21 GMT
location: https://www.example.com</pre></div>
            <div>
               <h3 id="rfc.section.D.4.2"><a href="#rfc.section.D.4.2">D.4.2</a>&nbsp;Second response
               </h3>
               <p id="rfc.section.D.4.2.p.1">The (":status", "302") header field is evicted from the header table to free space to allow adding the (":status", "200")
                  header field, copied from the static table into the header table. The (":status", "302") header field doesn't need to be removed
                  from the reference set as it is evicted from the header table.
               </p>
               <p id="rfc.section.D.4.2.p.2"></p>
               <div id="rfc.figure.u.64"></div>
               <p>Header set to encode:</p><pre>:status: 200
cache-control: private
date: Mon, 21 Oct 2013 20:13:21 GMT
location: https://www.example.com</pre><p id="rfc.section.D.4.2.p.3"></p>
               <div id="rfc.figure.u.65"></div>
               <p>Reference set:</p><pre>[  1] location: https://www.example.com
[  2] date: Mon, 21 Oct 2013 20:13:21 GMT
[  3] cache-control: private
[  4] :status: 302</pre><p id="rfc.section.D.4.2.p.4"></p>
               <div id="rfc.figure.u.66"></div>
               <p>Hex dump of encoded data:</p><pre>8c                                      | .</pre><p id="rfc.section.D.4.2.p.5"></p>
               <div id="rfc.figure.u.67"></div>
               <p>Decoding process:</p><pre>8c                                      | == Indexed - Add ==
                                        |   idx = 12
                                        | - evict: :status: 302
                                        | -&gt; :status: 200</pre><p id="rfc.section.D.4.2.p.6"></p>
               <div id="rfc.figure.u.68"></div>
               <p>Header Table (after decoding):</p><pre>[  1] (s =  42) :status: 200
[  2] (s =  63) location: https://www.example.com
[  3] (s =  65) date: Mon, 21 Oct 2013 20:13:21 GMT
[  4] (s =  52) cache-control: private
      Table size: 222</pre><p id="rfc.section.D.4.2.p.7"></p>
               <div id="rfc.figure.u.69"></div>
               <p>Decoded header set:</p><pre>:status: 200
location: https://www.example.com
date: Mon, 21 Oct 2013 20:13:21 GMT
cache-control: private</pre></div>
            <div>
               <h3 id="rfc.section.D.4.3"><a href="#rfc.section.D.4.3">D.4.3</a>&nbsp;Third response
               </h3>
               <p id="rfc.section.D.4.3.p.1">Several header fields are evicted from the header table during the processing of this header set. Before evicting a header
                  belonging to the reference set, it is emitted, by coding it twice as an Indexed Representation. The first representation removes
                  the header field from the reference set, the second one adds it again to the reference set, also emitting it.
               </p>
               <p id="rfc.section.D.4.3.p.2"></p>
               <div id="rfc.figure.u.70"></div>
               <p>Header set to encode:</p><pre>:status: 200
cache-control: private
date: Mon, 21 Oct 2013 20:13:22 GMT
location: https://www.example.com
content-encoding: gzip
set-cookie: foo=ASDJKHQKBZXOQWEOPIUAXQWEOIU; max-age=3600; version=1</pre><p id="rfc.section.D.4.3.p.3"></p>
               <div id="rfc.figure.u.71"></div>
               <p>Reference set:</p><pre>[  1] :status: 200
[  2] location: https://www.example.com
[  3] date: Mon, 21 Oct 2013 20:13:21 GMT
[  4] cache-control: private</pre><p id="rfc.section.D.4.3.p.4"></p>
               <div id="rfc.figure.u.72"></div>
               <p>Hex dump of encoded data:</p><pre>8484 031d 4d6f 6e2c 2032 3120 4f63 7420 | ....Mon, 21 Oct 
3230 3133 2032 303a 3133 3a32 3220 474d | 2013 20:13:22 GM
541d 0467 7a69 7084 8483 833a 3866 6f6f | T..gzip....:8foo
3d41 5344 4a4b 4851 4b42 5a58 4f51 5745 | =ASDJKHQKBZXOQWE
4f50 4955 4158 5157 454f 4955 3b20 6d61 | OPIUAXQWEOIU; ma
782d 6167 653d 3336 3030 3b20 7665 7273 | x-age=3600; vers
696f 6e3d 31                            | ion=1</pre><p id="rfc.section.D.4.3.p.5"></p>
               <div id="rfc.figure.u.73"></div>
               <p>Decoding process:</p><pre>84                                      | == Indexed - Remove ==
                                        |   idx = 4
                                        | -&gt; cache-control: private
84                                      | == Indexed - Add ==
                                        |   idx = 4
                                        | -&gt; cache-control: private
03                                      | == Literal indexed ==
                                        |   Indexed name (idx = 3)
                                        |     date
1d                                      |   Literal value (len = 29)
4d6f 6e2c 2032 3120 4f63 7420 3230 3133 | Mon, 21 Oct 2013
2032 303a 3133 3a32 3220 474d 54        |  20:13:22 GMT
                                        | - evict: cache-control: pr\
                                        |   ivate
                                        | -&gt; date: Mon, 21 Oct 2013 \
                                        |   20:13:22 GMT
1d                                      | == Literal indexed ==
                                        |   Indexed name (idx = 29)
                                        |     content-encoding
04                                      |   Literal value (len = 4)
677a 6970                               | gzip
                                        | - evict: date: Mon, 21 Oct\
                                        |    2013 20:13:21 GMT
                                        | -&gt; content-encoding: gzip
84                                      | == Indexed - Remove ==
                                        |   idx = 4
                                        | -&gt; location: https://www.e\
                                        |   xample.com
84                                      | == Indexed - Add ==
                                        |   idx = 4
                                        | -&gt; location: https://www.e\
                                        |   xample.com
83                                      | == Indexed - Remove ==
                                        |   idx = 3
                                        | -&gt; :status: 200
83                                      | == Indexed - Add ==
                                        |   idx = 3
                                        | -&gt; :status: 200
3a                                      | == Literal indexed ==
                                        |   Indexed name (idx = 58)
                                        |     set-cookie
38                                      |   Literal value (len = 56)
666f 6f3d 4153 444a 4b48 514b 425a 584f | foo=ASDJKHQKBZXO
5157 454f 5049 5541 5851 5745 4f49 553b | QWEOPIUAXQWEOIU;
206d 6178 2d61 6765 3d33 3630 303b 2076 |  max-age=3600; v
6572 7369 6f6e 3d31                     | ersion=1
                                        | - evict: location: https:/\
                                        |   /www.example.com
                                        | - evict: :status: 200
                                        | -&gt; set-cookie: foo=ASDJKHQ\
                                        |   KBZXOQWEOPIUAXQWEOIU; ma\
                                        |   x-age=3600; version=1</pre><p id="rfc.section.D.4.3.p.6"></p>
               <div id="rfc.figure.u.74"></div>
               <p>Header Table (after decoding):</p><pre>[  1] (s =  98) set-cookie: foo=ASDJKHQKBZXOQWEOPIUAXQWEOIU; max-age\
                 =3600; version=1
[  2] (s =  52) content-encoding: gzip
[  3] (s =  65) date: Mon, 21 Oct 2013 20:13:22 GMT
      Table size: 215</pre><p id="rfc.section.D.4.3.p.7"></p>
               <div id="rfc.figure.u.75"></div>
               <p>Decoded header set:</p><pre>cache-control: private
date: Mon, 21 Oct 2013 20:13:22 GMT
content-encoding: gzip
location: https://www.example.com
:status: 200
set-cookie: foo=ASDJKHQKBZXOQWEOPIUAXQWEOIU; max-age=3600; version=1</pre></div>
         </div>
         <div id="response.examples.with.huffman">
            <h2 id="rfc.section.D.5"><a href="#rfc.section.D.5">D.5</a>&nbsp;<a href="#response.examples.with.huffman">Response Examples with Huffman</a></h2>
            <p id="rfc.section.D.5.p.1">This section shows the same examples as the previous section, but using Huffman encoding for the literal values. The eviction
               mechanism uses the length of the decoded literal values, so the same evictions occurs as in the previous section.
            </p>
            <div>
               <h3 id="rfc.section.D.5.1"><a href="#rfc.section.D.5.1">D.5.1</a>&nbsp;First response
               </h3>
               <p id="rfc.section.D.5.1.p.1"></p>
               <div id="rfc.figure.u.76"></div>
               <p>Header set to encode:</p><pre>:status: 302
cache-control: private
date: Mon, 21 Oct 2013 20:13:21 GMT
location: https://www.example.com</pre><p id="rfc.section.D.5.1.p.2">Reference set: empty.</p>
               <p id="rfc.section.D.5.1.p.3"></p>
               <div id="rfc.figure.u.77"></div>
               <p>Hex dump of encoded data:</p><pre>0882 98a7 1885 73d5 cd11 1f22 98ef 6b3a | ......s...."..k:
7a0e 6e8f a263 d072 9a6e 8397 d869 bd87 | z.n..c.r.n...i..
3747 bbbf c730 90ce 3174 3d80 1b6d b107 | 7G...0..1t=..m..
cd1a 3962 44b7 4f                       | ..9bD.O</pre><p id="rfc.section.D.5.1.p.4"></p>
               <div id="rfc.figure.u.78"></div>
               <p>Decoding process:</p><pre>08                                      | == Literal indexed ==
                                        |   Indexed name (idx = 8)
                                        |     :status
82                                      |   Literal value (len = 3)
                                        |     Huffman encoded:
98a7                                    | ..
                                        |     Decoded:
                                        | 302
                                        | -&gt; :status: 302
18                                      | == Literal indexed ==
                                        |   Indexed name (idx = 24)
                                        |     cache-control
85                                      |   Literal value (len = 7)
                                        |     Huffman encoded:
73d5 cd11 1f                            | s....
                                        |     Decoded:
                                        | private
                                        | -&gt; cache-control: private
22                                      | == Literal indexed ==
                                        |   Indexed name (idx = 34)
                                        |     date
98                                      |   Literal value (len = 29)
                                        |     Huffman encoded:
ef6b 3a7a 0e6e 8fa2 63d0 729a 6e83 97d8 | .k:z.n..c.r.n...
69bd 8737 47bb bfc7                     | i..7G...
                                        |     Decoded:
                                        | Mon, 21 Oct 2013 20:13:21 \
                                        | GMT
                                        | -&gt; date: Mon, 21 Oct 2013 \
                                        |   20:13:21 GMT
30                                      | == Literal indexed ==
                                        |   Indexed name (idx = 48)
                                        |     location
90                                      |   Literal value (len = 23)
                                        |     Huffman encoded:
ce31 743d 801b 6db1 07cd 1a39 6244 b74f | .1t=..m....9bD.O
                                        |     Decoded:
                                        | https://www.example.com
                                        | -&gt; location: https://www.e\
                                        |   xample.com</pre><p id="rfc.section.D.5.1.p.5"></p>
               <div id="rfc.figure.u.79"></div>
               <p>Header Table (after decoding):</p><pre>[  1] (s =  63) location: https://www.example.com
[  2] (s =  65) date: Mon, 21 Oct 2013 20:13:21 GMT
[  3] (s =  52) cache-control: private
[  4] (s =  42) :status: 302
      Table size: 222</pre><p id="rfc.section.D.5.1.p.6"></p>
               <div id="rfc.figure.u.80"></div>
               <p>Decoded header set:</p><pre>:status: 302
cache-control: private
date: Mon, 21 Oct 2013 20:13:21 GMT
location: https://www.example.com</pre></div>
            <div>
               <h3 id="rfc.section.D.5.2"><a href="#rfc.section.D.5.2">D.5.2</a>&nbsp;Second response
               </h3>
               <p id="rfc.section.D.5.2.p.1">The (":status", "302") header field is evicted from the header table to free space to allow adding the (":status", "200")
                  header field, copied from the static table into the header table. The (":status", "302") header field doesn't need to be removed
                  from the reference set as it is evicted from the header table.
               </p>
               <p id="rfc.section.D.5.2.p.2"></p>
               <div id="rfc.figure.u.81"></div>
               <p>Header set to encode:</p><pre>:status: 200
cache-control: private
date: Mon, 21 Oct 2013 20:13:21 GMT
location: https://www.example.com</pre><p id="rfc.section.D.5.2.p.3"></p>
               <div id="rfc.figure.u.82"></div>
               <p>Reference set:</p><pre>[  1] location: https://www.example.com
[  2] date: Mon, 21 Oct 2013 20:13:21 GMT
[  3] cache-control: private
[  4] :status: 302</pre><p id="rfc.section.D.5.2.p.4"></p>
               <div id="rfc.figure.u.83"></div>
               <p>Hex dump of encoded data:</p><pre>8c                                      | .</pre><p id="rfc.section.D.5.2.p.5"></p>
               <div id="rfc.figure.u.84"></div>
               <p>Decoding process:</p><pre>8c                                      | == Indexed - Add ==
                                        |   idx = 12
                                        | - evict: :status: 302
                                        | -&gt; :status: 200</pre><p id="rfc.section.D.5.2.p.6"></p>
               <div id="rfc.figure.u.85"></div>
               <p>Header Table (after decoding):</p><pre>[  1] (s =  42) :status: 200
[  2] (s =  63) location: https://www.example.com
[  3] (s =  65) date: Mon, 21 Oct 2013 20:13:21 GMT
[  4] (s =  52) cache-control: private
      Table size: 222</pre><p id="rfc.section.D.5.2.p.7"></p>
               <div id="rfc.figure.u.86"></div>
               <p>Decoded header set:</p><pre>:status: 200
location: https://www.example.com
date: Mon, 21 Oct 2013 20:13:21 GMT
cache-control: private</pre></div>
            <div>
               <h3 id="rfc.section.D.5.3"><a href="#rfc.section.D.5.3">D.5.3</a>&nbsp;Third response
               </h3>
               <p id="rfc.section.D.5.3.p.1">Several header fields are evicted from the header table during the processing of this header set. Before evicting a header
                  belonging to the reference set, it is emitted, by coding it twice as an Indexed Representation. The first representation removes
                  the header field from the reference set, the second one adds it again to the reference set, also emitting it.
               </p>
               <p id="rfc.section.D.5.3.p.2"></p>
               <div id="rfc.figure.u.87"></div>
               <p>Header set to encode:</p><pre>:status: 200
cache-control: private
date: Mon, 21 Oct 2013 20:13:22 GMT
location: https://www.example.com
content-encoding: gzip
set-cookie: foo=ASDJKHQKBZXOQWEOPIUAXQWEOIU; max-age=3600; version=1</pre><p id="rfc.section.D.5.3.p.3"></p>
               <div id="rfc.figure.u.88"></div>
               <p>Reference set:</p><pre>[  1] :status: 200
[  2] location: https://www.example.com
[  3] date: Mon, 21 Oct 2013 20:13:21 GMT
[  4] cache-control: private</pre><p id="rfc.section.D.5.3.p.4"></p>
               <div id="rfc.figure.u.89"></div>
               <p>Hex dump of encoded data:</p><pre>8484 0398 ef6b 3a7a 0e6e 8fa2 63d0 729a | .....k:z.n..c.r.
6e83 97d8 69bd 873f 47bb bfc7 1d83 cbd5 | n...i..?G.......
4e84 8483 833a b3c5 adb7 7f87 6fc7 fbf7 | N....:......o...
fdbf bebf f3f7 f4fb 7ebb be9f 5f87 e37f | ............_...
efed faee fa7c 3f1d 5d1a 23ce 5464 36cd | .....|?.].#.Td6.
494b d5d1 cc5f 0535 969b                | IK..._.5..</pre><p id="rfc.section.D.5.3.p.5"></p>
               <div id="rfc.figure.u.90"></div>
               <p>Decoding process:</p><pre>84                                      | == Indexed - Remove ==
                                        |   idx = 4
                                        | -&gt; cache-control: private
84                                      | == Indexed - Add ==
                                        |   idx = 4
                                        | -&gt; cache-control: private
03                                      | == Literal indexed ==
                                        |   Indexed name (idx = 3)
                                        |     date
98                                      |   Literal value (len = 29)
                                        |     Huffman encoded:
ef6b 3a7a 0e6e 8fa2 63d0 729a 6e83 97d8 | .k:z.n..c.r.n...
69bd 873f 47bb bfc7                     | i..?G...
                                        |     Decoded:
                                        | Mon, 21 Oct 2013 20:13:22 \
                                        | GMT
                                        | - evict: cache-control: pr\
                                        |   ivate
                                        | -&gt; date: Mon, 21 Oct 2013 \
                                        |   20:13:22 GMT
1d                                      | == Literal indexed ==
                                        |   Indexed name (idx = 29)
                                        |     content-encoding
83                                      |   Literal value (len = 4)
                                        |     Huffman encoded:
cbd5 4e                                 | ..N
                                        |     Decoded:
                                        | gzip
                                        | - evict: date: Mon, 21 Oct\
                                        |    2013 20:13:21 GMT
                                        | -&gt; content-encoding: gzip
84                                      | == Indexed - Remove ==
                                        |   idx = 4
                                        | -&gt; location: https://www.e\
                                        |   xample.com
84                                      | == Indexed - Add ==
                                        |   idx = 4
                                        | -&gt; location: https://www.e\
                                        |   xample.com
83                                      | == Indexed - Remove ==
                                        |   idx = 3
                                        | -&gt; :status: 200
83                                      | == Indexed - Add ==
                                        |   idx = 3
                                        | -&gt; :status: 200
3a                                      | == Literal indexed ==
                                        |   Indexed name (idx = 58)
                                        |     set-cookie
b3                                      |   Literal value (len = 56)
                                        |     Huffman encoded:
c5ad b77f 876f c7fb f7fd bfbe bff3 f7f4 | .....o..........
fb7e bbbe 9f5f 87e3 7fef edfa eefa 7c3f | ....._........|?
1d5d 1a23 ce54 6436 cd49 4bd5 d1cc 5f05 | .].#.Td6.IK..._.
3596 9b                                 | 5..
                                        |     Decoded:
                                        | foo=ASDJKHQKBZXOQWEOPIUAXQ\
                                        | WEOIU; max-age=3600; versi\
                                        | on=1
                                        | - evict: location: https:/\
                                        |   /www.example.com
                                        | - evict: :status: 200
                                        | -&gt; set-cookie: foo=ASDJKHQ\
                                        |   KBZXOQWEOPIUAXQWEOIU; ma\
                                        |   x-age=3600; version=1</pre><p id="rfc.section.D.5.3.p.6"></p>
               <div id="rfc.figure.u.91"></div>
               <p>Header Table (after decoding):</p><pre>[  1] (s =  98) set-cookie: foo=ASDJKHQKBZXOQWEOPIUAXQWEOIU; max-age\
                 =3600; version=1
[  2] (s =  52) content-encoding: gzip
[  3] (s =  65) date: Mon, 21 Oct 2013 20:13:22 GMT
      Table size: 215</pre><p id="rfc.section.D.5.3.p.7"></p>
               <div id="rfc.figure.u.92"></div>
               <p>Decoded header set:</p><pre>cache-control: private
date: Mon, 21 Oct 2013 20:13:22 GMT
content-encoding: gzip
location: https://www.example.com
:status: 200
set-cookie: foo=ASDJKHQKBZXOQWEOPIUAXQWEOIU; max-age=3600; version=1</pre></div>
         </div>
      </div>
   </body>
</html>